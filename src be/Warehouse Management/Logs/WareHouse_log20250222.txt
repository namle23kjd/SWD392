2025-02-22 20:53:19.078 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 20:53:19.357 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 20:53:19.359 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 20:53:19.361 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 20:53:19.362 +07:00 [INF] Hosting environment: Development
2025-02-22 20:53:19.362 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 20:53:20.158 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger - null null
2025-02-22 20:53:20.303 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger - 301 0 null 155.5732ms
2025-02-22 20:53:20.307 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 20:53:20.384 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 76.8582ms
2025-02-22 20:53:20.432 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/swagger-ui.css - null null
2025-02-22 20:53:20.448 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/swagger-ui-bundle.js - null null
2025-02-22 20:53:20.454 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 20:53:20.447 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.css - null null
2025-02-22 20:53:20.449 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/swagger-ui-standalone-preset.js - null null
2025-02-22 20:53:20.496 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 20:53:20.508 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 57.4203ms
2025-02-22 20:53:20.496 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 20:53:20.523 +07:00 [INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
2025-02-22 20:53:20.525 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-02-22 20:53:20.527 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.css - 200 202 text/css 80.5828ms
2025-02-22 20:53:20.532 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/swagger-ui-standalone-preset.js - 200 230007 text/javascript 83.2112ms
2025-02-22 20:53:20.524 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-02-22 20:53:20.533 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 36.9062ms
2025-02-22 20:53:20.550 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/swagger-ui.css - 200 152035 text/css 116.2957ms
2025-02-22 20:53:20.565 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-02-22 20:53:20.566 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/swagger-ui-bundle.js - 200 1426050 text/javascript 118.2665ms
2025-02-22 20:53:20.592 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 96.1349ms
2025-02-22 20:53:20.887 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 20:53:21.037 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 150.1586ms
2025-02-22 20:53:41.838 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Auth/register - application/json 86
2025-02-22 20:53:42.741 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.AuthController.Register (Warehouse Management)'
2025-02-22 20:53:42.763 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Warehouse_Management.Models.DTO.RegisterRequestDTO) on controller Warehouse_Management.Controllers.AuthController (Warehouse Management).
2025-02-22 20:53:43.284 +07:00 [INF] Registration attempt for username: ha@example.com
2025-02-22 20:53:43.346 +07:00 [ERR] Error during registration for user ha@example.com: Passwords must be at least 8 characters., Passwords must have at least one non alphanumeric character., Passwords must have at least one uppercase ('A'-'Z').
System.Exception: Passwords must be at least 8 characters., Passwords must have at least one non alphanumeric character., Passwords must have at least one uppercase ('A'-'Z').
   at Warehouse_Management.Repositories.Repository.UserRepository.RegisterAsync(IdentityUser user, String password, String[] roles) in D:\SWD_BE\src be\Warehouse Management\Repositories\Repository\UserRepository.cs:line 117
   at Warehouse_Management.Services.Service.UserService.RegisterAsync(RegisterRequestDTO registerRequestDTO) in D:\SWD_BE\src be\Warehouse Management\Services\Service\UserService.cs:line 238
2025-02-22 20:53:43.376 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 20:53:43.392 +07:00 [INF] Executed action Warehouse_Management.Controllers.AuthController.Register (Warehouse Management) in 624.4956ms
2025-02-22 20:53:43.393 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.AuthController.Register (Warehouse Management)'
2025-02-22 20:53:43.395 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Auth/register - 500 null application/json; charset=utf-8 1557.3517ms
2025-02-22 20:54:04.562 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Auth/register - application/json 91
2025-02-22 20:54:04.566 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.AuthController.Register (Warehouse Management)'
2025-02-22 20:54:04.567 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Warehouse_Management.Models.DTO.RegisterRequestDTO) on controller Warehouse_Management.Controllers.AuthController (Warehouse Management).
2025-02-22 20:54:04.583 +07:00 [INF] Registration attempt for username: ha@example.com
2025-02-22 20:54:05.290 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 20:54:05.291 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 20:54:05.292 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 20:54:06.482 +07:00 [INF] Executed DbCommand (107ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-02-22 20:54:06.635 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 21), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [Status], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-02-22 20:54:06.655 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-02-22 20:54:06.663 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-02-22 20:54:06.681 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetRoles] ([Id], [ConcurrencyStamp], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2, @p3);
2025-02-22 20:54:06.691 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-02-22 20:54:06.725 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-02-22 20:54:06.730 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-02-22 20:54:06.741 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-02-22 20:54:06.770 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p17='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p18='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [PhoneNumberConfirmed] = @p12, [SecurityStamp] = @p13, [Status] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-02-22 20:54:06.781 +07:00 [INF] Registration successful for user: ha@example.com
2025-02-22 20:54:06.783 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 20:54:06.789 +07:00 [INF] Executed action Warehouse_Management.Controllers.AuthController.Register (Warehouse Management) in 2220.8236ms
2025-02-22 20:54:06.790 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.AuthController.Register (Warehouse Management)'
2025-02-22 20:54:06.795 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Auth/register - 200 null application/json; charset=utf-8 2233.5809ms
2025-02-22 20:54:23.620 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Auth/login - application/json 60
2025-02-22 20:54:23.623 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.AuthController.Login (Warehouse Management)'
2025-02-22 20:54:23.629 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Warehouse_Management.Models.DTO.LoginRequestDTO) on controller Warehouse_Management.Controllers.AuthController (Warehouse Management).
2025-02-22 20:54:23.646 +07:00 [INF] Login attempt for username: ha@example.com
2025-02-22 20:54:23.683 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-02-22 20:54:23.794 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-02-22 20:54:23.852 +07:00 [INF] Login successful for user: ha@example.com
2025-02-22 20:54:23.853 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 20:54:23.858 +07:00 [INF] Executed action Warehouse_Management.Controllers.AuthController.Login (Warehouse Management) in 227.8388ms
2025-02-22 20:54:23.859 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.AuthController.Login (Warehouse Management)'
2025-02-22 20:54:23.860 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Auth/login - 200 null application/json; charset=utf-8 240.0733ms
2025-02-22 20:55:28.576 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Product - application/json 137
2025-02-22 20:55:28.621 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 20:55:28.624 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(Warehouse_Management.Models.DTO.Product.CreateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 20:55:28.700 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Barcode], [BasePrice], [CreatedAt], [Description], [ProductName], [SKU], [UpdatedAt], [UserId])
OUTPUT INSERTED.[ProductId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-02-22 20:55:28.715 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 20:55:28.723 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management) in 97.4263ms
2025-02-22 20:55:28.727 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 20:55:28.728 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Product - 201 null application/json; charset=utf-8 152.1817ms
2025-02-22 20:55:45.115 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7190/api/Product/1 - application/json 116
2025-02-22 20:55:45.117 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 20:55:45.123 +07:00 [INF] Route matched with {action = "UpdateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProduct(Int32, Warehouse_Management.Models.DTO.Product.UpdateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 20:55:45.146 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 20:55:45.161 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Barcode] = @p0, [BasePrice] = @p1, [CreatedAt] = @p2, [Description] = @p3, [ProductName] = @p4, [SKU] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [ProductId] = @p8;
2025-02-22 20:55:45.163 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 20:55:45.169 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management) in 45.3401ms
2025-02-22 20:55:45.170 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 20:55:45.289 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Warehouse_Management.Middlewares.InternalServerErrorHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\SWD_BE\src be\Warehouse Management\Middlewares\InternalServerErrorHandler.cs:line 22
   at Warehouse_Management.Middlewares.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\SWD_BE\src be\Warehouse Management\Middlewares\GlobalExceptionHandler.cs:line 33
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-02-22 20:55:45.292 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-02-22 20:55:45.294 +07:00 [ERR] Connection id "0HNAJ911U85P9", Request id "0HNAJ911U85P9:0000001D": An unhandled exception was thrown by the application.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Warehouse_Management.Middlewares.InternalServerErrorHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\SWD_BE\src be\Warehouse Management\Middlewares\InternalServerErrorHandler.cs:line 22
   at Warehouse_Management.Middlewares.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\SWD_BE\src be\Warehouse Management\Middlewares\GlobalExceptionHandler.cs:line 33
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-02-22 20:55:45.306 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7190/api/Product/1 - 204 null application/json; charset=utf-8 191.9938ms
2025-02-22 20:56:12.390 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7190/api/Product/1 - application/json 137
2025-02-22 20:56:12.420 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 20:56:12.420 +07:00 [INF] Route matched with {action = "UpdateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProduct(Int32, Warehouse_Management.Models.DTO.Product.UpdateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 20:56:12.427 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 20:56:12.435 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Barcode] = @p0, [BasePrice] = @p1, [CreatedAt] = @p2, [Description] = @p3, [ProductName] = @p4, [SKU] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [ProductId] = @p8;
2025-02-22 20:56:12.436 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 20:56:12.438 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management) in 16.6906ms
2025-02-22 20:56:12.439 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 20:56:12.521 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Warehouse_Management.Middlewares.InternalServerErrorHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\SWD_BE\src be\Warehouse Management\Middlewares\InternalServerErrorHandler.cs:line 22
   at Warehouse_Management.Middlewares.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\SWD_BE\src be\Warehouse Management\Middlewares\GlobalExceptionHandler.cs:line 33
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-02-22 20:56:12.523 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-02-22 20:56:12.524 +07:00 [ERR] Connection id "0HNAJ911U85P9", Request id "0HNAJ911U85P9:0000001F": An unhandled exception was thrown by the application.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Warehouse_Management.Middlewares.InternalServerErrorHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\SWD_BE\src be\Warehouse Management\Middlewares\InternalServerErrorHandler.cs:line 22
   at Warehouse_Management.Middlewares.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\SWD_BE\src be\Warehouse Management\Middlewares\GlobalExceptionHandler.cs:line 33
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-02-22 20:56:12.526 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7190/api/Product/1 - 204 null application/json; charset=utf-8 138.4046ms
2025-02-22 20:57:09.329 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7190/api/Product/1 - application/json 138
2025-02-22 20:57:09.335 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 20:57:09.336 +07:00 [INF] Route matched with {action = "UpdateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProduct(Int32, Warehouse_Management.Models.DTO.Product.UpdateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 20:57:09.340 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 20:57:09.471 +07:00 [INF] Executed DbCommand (129ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Barcode] = @p0, [BasePrice] = @p1, [CreatedAt] = @p2, [Description] = @p3, [ProductName] = @p4, [SKU] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [ProductId] = @p8;
2025-02-22 20:57:09.472 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 20:57:09.474 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management) in 137.4969ms
2025-02-22 20:57:09.475 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 20:57:09.562 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Warehouse_Management.Middlewares.InternalServerErrorHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\SWD_BE\src be\Warehouse Management\Middlewares\InternalServerErrorHandler.cs:line 22
   at Warehouse_Management.Middlewares.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\SWD_BE\src be\Warehouse Management\Middlewares\GlobalExceptionHandler.cs:line 33
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-02-22 20:57:09.564 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-02-22 20:57:09.565 +07:00 [ERR] Connection id "0HNAJ911U85P9", Request id "0HNAJ911U85P9:00000021": An unhandled exception was thrown by the application.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Warehouse_Management.Middlewares.InternalServerErrorHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\SWD_BE\src be\Warehouse Management\Middlewares\InternalServerErrorHandler.cs:line 22
   at Warehouse_Management.Middlewares.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\SWD_BE\src be\Warehouse Management\Middlewares\GlobalExceptionHandler.cs:line 33
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-02-22 20:57:09.568 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7190/api/Product/1 - 204 null application/json; charset=utf-8 238.8571ms
2025-02-22 20:59:42.758 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 20:59:42.998 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 20:59:42.999 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 20:59:43.002 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 20:59:43.003 +07:00 [INF] Hosting environment: Development
2025-02-22 20:59:43.003 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 20:59:43.410 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 20:59:43.639 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 238.8414ms
2025-02-22 20:59:43.708 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 20:59:43.708 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 20:59:43.714 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 6.0557ms
2025-02-22 20:59:43.722 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 13.954ms
2025-02-22 20:59:43.760 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 20:59:43.828 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 67.71ms
2025-02-22 20:59:44.286 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 20:59:44.463 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 176.7067ms
2025-02-22 21:00:14.808 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7190/api/Product/1 - application/json 119
2025-02-22 21:00:14.900 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 21:00:14.921 +07:00 [INF] Route matched with {action = "UpdateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProduct(Int32, Warehouse_Management.Models.DTO.Product.UpdateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 21:00:15.667 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:00:15.669 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:00:15.670 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:00:16.180 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 21:00:16.326 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Barcode] = @p0, [BasePrice] = @p1, [CreatedAt] = @p2, [Description] = @p3, [ProductName] = @p4, [SKU] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [ProductId] = @p8;
2025-02-22 21:00:16.339 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 21:00:16.372 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management) in 1446.0201ms
2025-02-22 21:00:16.373 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 21:00:16.379 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7190/api/Product/1 - 200 null application/json; charset=utf-8 1572.3605ms
2025-02-22 21:06:50.176 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 21:06:50.505 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 21:06:50.507 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 21:06:50.512 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 21:06:50.515 +07:00 [INF] Hosting environment: Development
2025-02-22 21:06:50.515 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 21:06:50.969 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 21:06:51.157 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 194.8089ms
2025-02-22 21:06:51.227 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 21:06:51.227 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 21:06:51.227 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 21:06:51.236 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 9.4185ms
2025-02-22 21:06:51.252 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 25.8254ms
2025-02-22 21:06:51.295 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.1707ms
2025-02-22 21:06:51.647 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 21:06:51.853 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 206.4366ms
2025-02-22 21:09:14.174 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7190/api/Product/1 - application/json 142
2025-02-22 21:09:14.227 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 21:09:14.246 +07:00 [INF] Route matched with {action = "UpdateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProduct(Int32, Warehouse_Management.Models.DTO.Product.UpdateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 21:09:14.990 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:09:14.991 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:09:14.992 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:09:15.525 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 21:09:15.668 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Barcode] = @p0, [BasePrice] = @p1, [CreatedAt] = @p2, [Description] = @p3, [ProductName] = @p4, [SKU] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [ProductId] = @p8;
2025-02-22 21:09:15.681 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 21:09:15.710 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management) in 1459.6428ms
2025-02-22 21:09:15.712 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 21:09:15.718 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7190/api/Product/1 - 200 null application/json; charset=utf-8 1544.7092ms
2025-02-22 21:13:21.790 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 21:13:22.020 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 21:13:22.021 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 21:13:22.024 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 21:13:22.024 +07:00 [INF] Hosting environment: Development
2025-02-22 21:13:22.025 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 21:13:22.263 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 21:13:22.414 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 159.1961ms
2025-02-22 21:13:22.478 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 21:13:22.478 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 21:13:22.478 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 21:13:22.487 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 8.4735ms
2025-02-22 21:13:22.498 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 19.805ms
2025-02-22 21:13:22.522 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.8835ms
2025-02-22 21:13:22.889 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 21:13:23.023 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 133.859ms
2025-02-22 21:15:46.040 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Product - application/json 130
2025-02-22 21:15:46.095 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 21:15:46.114 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(Warehouse_Management.Models.DTO.Product.CreateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 21:15:46.340 +07:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-22 21:15:46.355 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management) in 235.4204ms
2025-02-22 21:15:46.355 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 21:15:46.357 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Product - 401 null application/json; charset=utf-8 316.8673ms
2025-02-22 21:16:13.600 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Product - application/json 130
2025-02-22 21:16:13.653 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 21:16:13.655 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(Warehouse_Management.Models.DTO.Product.CreateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 21:16:14.149 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:16:14.150 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:16:14.151 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:16:14.629 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Barcode], [BasePrice], [CreatedAt], [Description], [ProductName], [SKU], [UpdatedAt], [UserId])
OUTPUT INSERTED.[ProductId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-02-22 21:16:14.671 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 21:16:14.692 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management) in 1035.8721ms
2025-02-22 21:16:14.694 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 21:16:14.699 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Product - 201 null application/json; charset=utf-8 1101.08ms
2025-02-22 21:16:21.503 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7190/api/Product/2 - null null
2025-02-22 21:16:21.507 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management)'
2025-02-22 21:16:21.512 +07:00 [INF] Route matched with {action = "DeleteProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteProduct(Int32) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 21:16:21.734 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 21:16:21.782 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Products]
OUTPUT 1
WHERE [ProductId] = @p0;
2025-02-22 21:16:21.788 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-02-22 21:16:21.789 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management) in 275.8898ms
2025-02-22 21:16:21.789 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management)'
2025-02-22 21:16:21.791 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7190/api/Product/2 - 204 null null 287.9307ms
2025-02-22 21:22:40.201 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 21:22:40.394 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 21:22:40.395 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 21:22:40.398 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 21:22:40.399 +07:00 [INF] Hosting environment: Development
2025-02-22 21:22:40.399 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 21:22:40.637 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 21:22:40.792 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 159.1739ms
2025-02-22 21:22:40.813 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 21:22:40.813 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 21:22:40.818 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 4.9482ms
2025-02-22 21:22:40.821 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 8.9209ms
2025-02-22 21:22:40.870 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 21:22:40.908 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.3794ms
2025-02-22 21:22:41.217 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 21:22:41.359 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 142.2272ms
2025-02-22 21:23:01.074 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7190/api/Product/1 - application/json 118
2025-02-22 21:23:01.161 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 21:23:01.184 +07:00 [INF] Route matched with {action = "UpdateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProduct(Int32, Warehouse_Management.Models.DTO.Product.UpdateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 21:23:01.910 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:23:01.912 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:23:01.912 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:23:02.429 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 21:23:02.562 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Barcode] = @p0, [BasePrice] = @p1, [CreatedAt] = @p2, [Description] = @p3, [ProductName] = @p4, [SKU] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [ProductId] = @p8;
2025-02-22 21:23:02.577 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 21:23:02.605 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management) in 1417.3669ms
2025-02-22 21:23:02.607 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 21:23:02.732 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Warehouse_Management.Middlewares.InternalServerErrorHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\SWD_BE\src be\Warehouse Management\Middlewares\InternalServerErrorHandler.cs:line 22
   at Warehouse_Management.Middlewares.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\SWD_BE\src be\Warehouse Management\Middlewares\GlobalExceptionHandler.cs:line 33
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-02-22 21:23:02.758 +07:00 [WRN] The response has already started, the error page middleware will not be executed.
2025-02-22 21:23:02.760 +07:00 [ERR] Connection id "0HNAJ9HEKJQJV", Request id "0HNAJ9HEKJQJV:0000000B": An unhandled exception was thrown by the application.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at Warehouse_Management.Middlewares.InternalServerErrorHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\SWD_BE\src be\Warehouse Management\Middlewares\InternalServerErrorHandler.cs:line 22
   at Warehouse_Management.Middlewares.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\SWD_BE\src be\Warehouse Management\Middlewares\GlobalExceptionHandler.cs:line 33
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-02-22 21:23:02.770 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7190/api/Product/1 - 204 null application/json; charset=utf-8 1695.5946ms
2025-02-22 21:23:20.260 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 21:23:20.529 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 21:23:20.530 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 21:23:20.533 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 21:23:20.535 +07:00 [INF] Hosting environment: Development
2025-02-22 21:23:20.535 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 21:23:21.030 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 21:23:21.186 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 162.8004ms
2025-02-22 21:23:21.228 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 21:23:21.228 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 21:23:21.233 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 5.7258ms
2025-02-22 21:23:21.238 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 9.9886ms
2025-02-22 21:23:21.256 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 21:23:21.307 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.206ms
2025-02-22 21:23:21.618 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 21:23:21.756 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 138.1541ms
2025-02-22 21:23:54.317 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7190/api/Product/1 - application/json 118
2025-02-22 21:23:54.413 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 21:23:54.432 +07:00 [INF] Route matched with {action = "UpdateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProduct(Int32, Warehouse_Management.Models.DTO.Product.UpdateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 21:23:55.197 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:23:55.198 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:23:55.198 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:23:55.718 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 21:23:55.868 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Barcode] = @p0, [BasePrice] = @p1, [CreatedAt] = @p2, [Description] = @p3, [ProductName] = @p4, [SKU] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [ProductId] = @p8;
2025-02-22 21:23:55.883 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 21:23:55.911 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management) in 1474.0906ms
2025-02-22 21:23:55.913 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 21:23:55.919 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7190/api/Product/1 - 200 null application/json; charset=utf-8 1601.8355ms
2025-02-22 21:25:20.656 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 21:25:20.920 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 21:25:20.922 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 21:25:20.925 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 21:25:20.926 +07:00 [INF] Hosting environment: Development
2025-02-22 21:25:20.926 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 21:25:21.295 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 21:25:21.497 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 215.2156ms
2025-02-22 21:25:21.553 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 21:25:21.561 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 21:25:21.553 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 21:25:21.576 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 22.8821ms
2025-02-22 21:25:21.587 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 34.626ms
2025-02-22 21:25:21.623 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.4278ms
2025-02-22 21:25:21.931 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 21:25:22.079 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 148.1116ms
2025-02-22 21:25:33.027 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7190/api/Product/2 - null null
2025-02-22 21:25:33.114 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management)'
2025-02-22 21:25:33.134 +07:00 [INF] Route matched with {action = "DeleteProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteProduct(Int32) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 21:25:33.835 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:25:33.838 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:25:33.839 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:25:34.350 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 21:25:34.374 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 21:25:34.399 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management) in 1260.7729ms
2025-02-22 21:25:34.401 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management)'
2025-02-22 21:25:34.407 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7190/api/Product/2 - 404 null application/json; charset=utf-8 1380.2879ms
2025-02-22 21:25:55.260 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Product - application/json 114
2025-02-22 21:25:55.266 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 21:25:55.272 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(Warehouse_Management.Models.DTO.Product.CreateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 21:25:55.538 +07:00 [INF] Executed DbCommand (86ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Barcode], [BasePrice], [CreatedAt], [Description], [ProductName], [SKU], [UpdatedAt], [UserId])
OUTPUT INSERTED.[ProductId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-02-22 21:25:55.565 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 21:25:55.576 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management) in 302.2482ms
2025-02-22 21:25:55.578 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 21:25:55.579 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Product - 201 null application/json; charset=utf-8 319.3727ms
2025-02-22 21:26:05.814 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7190/api/Product/3 - null null
2025-02-22 21:26:05.818 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management)'
2025-02-22 21:26:05.821 +07:00 [INF] Route matched with {action = "DeleteProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteProduct(Int32) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 21:26:05.876 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 21:26:05.896 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Products]
OUTPUT 1
WHERE [ProductId] = @p0;
2025-02-22 21:26:05.900 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 21:26:05.902 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management) in 79.0794ms
2025-02-22 21:26:05.903 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management)'
2025-02-22 21:26:05.903 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7190/api/Product/3 - 200 null application/json; charset=utf-8 88.9536ms
2025-02-22 21:27:23.349 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 21:27:23.628 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 21:27:23.630 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 21:27:23.636 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 21:27:23.637 +07:00 [INF] Hosting environment: Development
2025-02-22 21:27:23.637 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 21:27:24.219 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 21:27:24.396 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 184.7264ms
2025-02-22 21:27:24.455 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 21:27:24.455 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 21:27:24.455 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 21:27:24.465 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 10.9118ms
2025-02-22 21:27:24.491 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 36.4204ms
2025-02-22 21:27:24.534 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 80.0793ms
2025-02-22 21:27:24.882 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 21:27:25.039 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 157.3095ms
2025-02-22 21:27:55.577 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Product - application/json 116
2025-02-22 21:27:55.673 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 21:27:55.692 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(Warehouse_Management.Models.DTO.Product.CreateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 21:27:56.429 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:27:56.431 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:27:56.432 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:27:56.907 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Barcode], [BasePrice], [CreatedAt], [Description], [ProductName], [SKU], [UpdatedAt], [UserId])
OUTPUT INSERTED.[ProductId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-02-22 21:27:56.949 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 21:27:56.976 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management) in 1279.3737ms
2025-02-22 21:27:56.977 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 21:27:56.984 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Product - 201 null application/json; charset=utf-8 1406.8338ms
2025-02-22 21:28:03.735 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7190/api/Product/4 - null null
2025-02-22 21:28:03.741 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management)'
2025-02-22 21:28:03.748 +07:00 [INF] Route matched with {action = "DeleteProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteProduct(Int32) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 21:28:03.974 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 21:28:03.994 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Products]
OUTPUT 1
WHERE [ProductId] = @p0;
2025-02-22 21:28:03.999 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 21:28:04.007 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management) in 257.329ms
2025-02-22 21:28:04.008 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management)'
2025-02-22 21:28:04.009 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7190/api/Product/4 - 200 null application/json; charset=utf-8 273.4936ms
2025-02-22 21:33:07.046 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7190/api/Product/1 - application/json 119
2025-02-22 21:33:07.058 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 21:33:07.063 +07:00 [INF] Route matched with {action = "UpdateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProduct(Int32, Warehouse_Management.Models.DTO.Product.UpdateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 21:33:07.087 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 21:33:07.099 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Barcode] = @p0, [BasePrice] = @p1, [CreatedAt] = @p2, [Description] = @p3, [ProductName] = @p4, [SKU] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [ProductId] = @p8;
2025-02-22 21:33:07.101 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 21:33:07.102 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management) in 37.7646ms
2025-02-22 21:33:07.102 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 21:33:07.103 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7190/api/Product/1 - 200 null application/json; charset=utf-8 57.8154ms
2025-02-22 21:52:48.867 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 21:52:49.062 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 21:52:49.062 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 21:52:49.065 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 21:52:49.065 +07:00 [INF] Hosting environment: Development
2025-02-22 21:52:49.066 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 21:52:49.487 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 21:52:49.642 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 163.8553ms
2025-02-22 21:52:49.691 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 21:52:49.691 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 21:52:49.698 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 6.9303ms
2025-02-22 21:52:49.705 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 13.9005ms
2025-02-22 21:52:49.706 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 21:52:49.756 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.979ms
2025-02-22 21:52:50.083 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 21:52:50.227 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 143.872ms
2025-02-22 21:54:32.797 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7190/api/Product/1 - application/json 113
2025-02-22 21:54:32.901 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 21:54:32.922 +07:00 [INF] Route matched with {action = "UpdateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProduct(Int32, Warehouse_Management.Models.DTO.Product.UpdateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 21:54:33.683 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:54:33.685 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:54:33.686 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 21:54:34.237 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 21:54:34.382 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Barcode] = @p0, [BasePrice] = @p1, [CreatedAt] = @p2, [Description] = @p3, [ProductName] = @p4, [SKU] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [ProductId] = @p8;
2025-02-22 21:54:34.398 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 21:54:34.427 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management) in 1500.7245ms
2025-02-22 21:54:34.429 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 21:54:34.436 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7190/api/Product/1 - 200 null application/json; charset=utf-8 1638.2895ms
2025-02-22 21:56:12.806 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Shelf - application/json 85
2025-02-22 21:56:12.812 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ShelfController.CreateShelf (Warehouse Management)'
2025-02-22 21:56:12.816 +07:00 [INF] Route matched with {action = "CreateShelf", controller = "Shelf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateShelf(Warehouse_Management.Models.DTO.Shelf.CreateShelfDTO) on controller Warehouse_Management.Controllers.ShelfController (Warehouse Management).
2025-02-22 21:56:12.862 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__code_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Shelves] AS [s]
        WHERE [s].[Code] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-02-22 21:56:12.916 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Shelves] ([Capacity], [Code], [CreatedAt], [IsActive], [Location], [Name], [UpdatedAt], [UserId])
OUTPUT INSERTED.[ShelfId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-02-22 21:56:12.931 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 21:56:12.936 +07:00 [INF] Executed action Warehouse_Management.Controllers.ShelfController.CreateShelf (Warehouse Management) in 118.7146ms
2025-02-22 21:56:12.937 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ShelfController.CreateShelf (Warehouse Management)'
2025-02-22 21:56:12.937 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Shelf - 201 null application/json; charset=utf-8 133.1821ms
2025-02-22 21:56:26.309 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Shelf/1 - null null
2025-02-22 21:56:26.314 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ShelfController.GetShelfById (Warehouse Management)'
2025-02-22 21:56:26.320 +07:00 [INF] Route matched with {action = "GetShelfById", controller = "Shelf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetShelfById(Int32) on controller Warehouse_Management.Controllers.ShelfController (Warehouse Management).
2025-02-22 21:56:26.447 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a0].[Status]
FROM [Shelves] AS [s]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'ApplicationUser'
) AS [a0] ON [s].[UserId] = [a0].[Id]
WHERE [s].[ShelfId] = @__id_0
2025-02-22 21:56:26.488 +07:00 [ERR] Missing type map configuration or unsupported mapping.

Mapping types:
Shelf -> IEnumerable`1
Warehouse_Management.Models.Domain.Shelf -> System.Collections.Generic.IEnumerable`1[[Warehouse_Management.Models.DTO.Shelf.ShelfDTO, Warehouse Management, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
Shelf -> IEnumerable`1
Warehouse_Management.Models.Domain.Shelf -> System.Collections.Generic.IEnumerable`1[[Warehouse_Management.Models.DTO.Shelf.ShelfDTO, Warehouse Management, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
   at lambda_method363(Closure, Object, IEnumerable`1, ResolutionContext)
   at Warehouse_Management.Services.Service.ShelfService.GetShelfByIdAsync(Int32 id) in D:\SWD_BE\src be\Warehouse Management\Services\Service\ShelfService.cs:line 80
2025-02-22 21:56:26.513 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 21:56:26.513 +07:00 [INF] Executed action Warehouse_Management.Controllers.ShelfController.GetShelfById (Warehouse Management) in 191.9171ms
2025-02-22 21:56:26.514 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ShelfController.GetShelfById (Warehouse Management)'
2025-02-22 21:56:26.515 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Shelf/1 - 500 null application/json; charset=utf-8 205.4707ms
2025-02-22 22:00:50.898 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Product/by-id/1 - null null
2025-02-22 22:00:50.909 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:00:50 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 22:00:50.913 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:00:50 PM'.
2025-02-22 22:00:50.914 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.GetProductById (Warehouse Management)'
2025-02-22 22:00:50.918 +07:00 [INF] Route matched with {action = "GetProductById", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProductById(Int32) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 22:00:50.929 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 22:00:50.931 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:00:50.932 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.GetProductById (Warehouse Management) in 11.8304ms
2025-02-22 22:00:50.936 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.GetProductById (Warehouse Management)'
2025-02-22 22:00:50.937 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Product/by-id/1 - 200 null application/json; charset=utf-8 41.3697ms
2025-02-22 22:01:29.687 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 22:01:29.897 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 22:01:29.898 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 22:01:29.901 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 22:01:29.902 +07:00 [INF] Hosting environment: Development
2025-02-22 22:01:29.902 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 22:01:30.318 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 22:01:30.479 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 169.5198ms
2025-02-22 22:01:30.529 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 22:01:30.529 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 22:01:30.534 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 4.9034ms
2025-02-22 22:01:30.542 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 13.7938ms
2025-02-22 22:01:30.548 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 22:01:30.587 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.3221ms
2025-02-22 22:01:30.923 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 22:01:31.051 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 128.7167ms
2025-02-22 22:03:27.220 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Shelf/1 - null null
2025-02-22 22:03:27.319 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:03:27 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 22:03:27.343 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:03:27 PM'.
2025-02-22 22:03:27.346 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ShelfController.GetShelfById (Warehouse Management)'
2025-02-22 22:03:27.366 +07:00 [INF] Route matched with {action = "GetShelfById", controller = "Shelf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetShelfById(Int32) on controller Warehouse_Management.Controllers.ShelfController (Warehouse Management).
2025-02-22 22:03:28.085 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:03:28.086 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:03:28.086 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:03:28.700 +07:00 [INF] Executed DbCommand (42ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a0].[Status]
FROM [Shelves] AS [s]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'ApplicationUser'
) AS [a0] ON [s].[UserId] = [a0].[Id]
WHERE [s].[ShelfId] = @__id_0
2025-02-22 22:03:28.794 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:03:28.836 +07:00 [INF] Executed action Warehouse_Management.Controllers.ShelfController.GetShelfById (Warehouse Management) in 1466.0931ms
2025-02-22 22:03:28.838 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ShelfController.GetShelfById (Warehouse Management)'
2025-02-22 22:03:28.844 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Shelf/1 - 200 null application/json; charset=utf-8 1624.7253ms
2025-02-22 22:03:47.635 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7190/api/Shelf/1 - application/json 92
2025-02-22 22:03:47.640 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:03:47 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 22:03:47.641 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:03:47 PM'.
2025-02-22 22:03:47.642 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ShelfController.UpdateShelf (Warehouse Management)'
2025-02-22 22:03:47.647 +07:00 [INF] Route matched with {action = "UpdateShelf", controller = "Shelf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateShelf(Int32, Warehouse_Management.Models.DTO.Shelf.CreateShelfDTO) on controller Warehouse_Management.Controllers.ShelfController (Warehouse Management).
2025-02-22 22:03:47.688 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a0].[Status]
FROM [Shelves] AS [s]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'ApplicationUser'
) AS [a0] ON [s].[UserId] = [a0].[Id]
WHERE [s].[ShelfId] = @__id_0
2025-02-22 22:03:47.768 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Shelves] SET [Capacity] = @p0, [Code] = @p1, [CreatedAt] = @p2, [IsActive] = @p3, [Location] = @p4, [Name] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [ShelfId] = @p8;
2025-02-22 22:03:47.778 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:03:47.779 +07:00 [INF] Executed action Warehouse_Management.Controllers.ShelfController.UpdateShelf (Warehouse Management) in 131.2549ms
2025-02-22 22:03:47.780 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ShelfController.UpdateShelf (Warehouse Management)'
2025-02-22 22:03:47.781 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7190/api/Shelf/1 - 200 null application/json; charset=utf-8 145.5978ms
2025-02-22 22:21:04.205 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 22:21:04.422 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 22:21:04.422 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 22:21:04.425 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 22:21:04.425 +07:00 [INF] Hosting environment: Development
2025-02-22 22:21:04.426 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 22:21:04.771 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 22:21:04.958 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 195.259ms
2025-02-22 22:21:05.025 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 22:21:05.025 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 22:21:05.030 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 5.5901ms
2025-02-22 22:21:05.040 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 15.2038ms
2025-02-22 22:21:05.046 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 22:21:05.098 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.1138ms
2025-02-22 22:21:05.439 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 22:21:05.611 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 172.6192ms
2025-02-22 22:21:28.144 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 22:21:28.152 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 8.644ms
2025-02-22 22:21:28.194 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 22:21:28.196 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 22:21:28.195 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 22:21:28.201 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 6.9427ms
2025-02-22 22:21:28.208 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 11.9268ms
2025-02-22 22:21:28.224 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.1051ms
2025-02-22 22:21:28.391 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 22:21:28.407 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/favicon-32x32.png - null null
2025-02-22 22:21:28.416 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 25.282ms
2025-02-22 22:21:28.432 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-02-22 22:21:28.433 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/favicon-32x32.png - 200 628 image/png 26.9164ms
2025-02-22 22:23:30.025 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 22:23:30.231 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 22:23:30.233 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 22:23:30.235 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 22:23:30.236 +07:00 [INF] Hosting environment: Development
2025-02-22 22:23:30.236 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 22:23:30.626 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 22:23:30.785 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 164.8154ms
2025-02-22 22:23:30.828 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 22:23:30.828 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 22:23:30.833 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 5.6609ms
2025-02-22 22:23:30.837 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 9.934ms
2025-02-22 22:23:30.850 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 22:23:30.893 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.0521ms
2025-02-22 22:23:31.188 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 22:23:31.359 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 171.1212ms
2025-02-22 22:23:46.598 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7190/api/Shelf/1 - null null
2025-02-22 22:23:46.679 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:23:46 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 22:23:46.702 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:23:46 PM'.
2025-02-22 22:23:46.705 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ShelfController.DeleteProduct (Warehouse Management)'
2025-02-22 22:23:46.724 +07:00 [INF] Route matched with {action = "DeleteProduct", controller = "Shelf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteProduct(Int32) on controller Warehouse_Management.Controllers.ShelfController (Warehouse Management).
2025-02-22 22:23:47.411 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:23:47.413 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:23:47.413 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:23:48.014 +07:00 [INF] Executed DbCommand (41ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a0].[Status]
FROM [Shelves] AS [s]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'ApplicationUser'
) AS [a0] ON [s].[UserId] = [a0].[Id]
WHERE [s].[ShelfId] = @__id_0
2025-02-22 22:23:48.157 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Shelves]
OUTPUT 1
WHERE [ShelfId] = @p0;
2025-02-22 22:23:48.170 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-02-22 22:23:48.174 +07:00 [INF] Executed action Warehouse_Management.Controllers.ShelfController.DeleteProduct (Warehouse Management) in 1446.1815ms
2025-02-22 22:23:48.175 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ShelfController.DeleteProduct (Warehouse Management)'
2025-02-22 22:23:48.181 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7190/api/Shelf/1 - 204 null null 1583.0996ms
2025-02-22 22:24:10.360 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 22:24:10.586 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 22:24:10.587 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 22:24:10.589 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 22:24:10.590 +07:00 [INF] Hosting environment: Development
2025-02-22 22:24:10.590 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 22:24:11.189 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 22:24:11.349 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 167.3108ms
2025-02-22 22:24:11.394 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 22:24:11.394 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 22:24:11.394 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 22:24:11.401 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 6.1777ms
2025-02-22 22:24:11.411 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 17.1228ms
2025-02-22 22:24:11.448 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.734ms
2025-02-22 22:24:11.726 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 22:24:11.879 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 153.3095ms
2025-02-22 22:24:21.509 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7190/api/Product/4 - null null
2025-02-22 22:24:21.595 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:24:21 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 22:24:21.619 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:24:21 PM'.
2025-02-22 22:24:21.623 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management)'
2025-02-22 22:24:21.642 +07:00 [INF] Route matched with {action = "DeleteProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteProduct(Int32) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 22:24:22.342 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:24:22.343 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:24:22.344 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:24:22.850 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 22:24:22.875 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:24:22.900 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management) in 1253.1472ms
2025-02-22 22:24:22.902 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management)'
2025-02-22 22:24:22.908 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7190/api/Product/4 - 404 null application/json; charset=utf-8 1399.3543ms
2025-02-22 22:24:28.538 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Product - null null
2025-02-22 22:24:28.542 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:24:28 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 22:24:28.544 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:24:28 PM'.
2025-02-22 22:24:28.546 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.GetAllProducts (Warehouse Management)'
2025-02-22 22:24:28.549 +07:00 [INF] Route matched with {action = "GetAllProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllProducts() on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 22:24:28.583 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
2025-02-22 22:24:28.642 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:24:28.657 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.GetAllProducts (Warehouse Management) in 106.9937ms
2025-02-22 22:24:28.659 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.GetAllProducts (Warehouse Management)'
2025-02-22 22:24:28.660 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Product - 200 null application/json; charset=utf-8 122.132ms
2025-02-22 22:24:40.708 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Product - application/json 114
2025-02-22 22:24:40.712 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:24:40 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 22:24:40.714 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:24:40 PM'.
2025-02-22 22:24:40.714 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 22:24:40.718 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(Warehouse_Management.Models.DTO.Product.CreateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 22:24:40.747 +07:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-22 22:24:40.756 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management) in 36.8491ms
2025-02-22 22:24:40.756 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 22:24:40.757 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Product - 401 null application/json; charset=utf-8 49.3447ms
2025-02-22 22:25:30.479 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Auth/login - application/json 60
2025-02-22 22:25:30.485 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.AuthController.Login (Warehouse Management)'
2025-02-22 22:25:30.488 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Warehouse_Management.Models.DTO.LoginRequestDTO) on controller Warehouse_Management.Controllers.AuthController (Warehouse Management).
2025-02-22 22:25:30.502 +07:00 [INF] Login attempt for username: ha@exemple.com
2025-02-22 22:25:30.563 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-02-22 22:25:30.565 +07:00 [WRN] Login failed - User not found: ha@exemple.com
2025-02-22 22:25:30.566 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:25:30.567 +07:00 [INF] Executed action Warehouse_Management.Controllers.AuthController.Login (Warehouse Management) in 76.8353ms
2025-02-22 22:25:30.567 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.AuthController.Login (Warehouse Management)'
2025-02-22 22:25:30.569 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Auth/login - 401 null application/json; charset=utf-8 89.8586ms
2025-02-22 22:25:42.975 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Auth/login - application/json 60
2025-02-22 22:25:42.977 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.AuthController.Login (Warehouse Management)'
2025-02-22 22:25:42.978 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Warehouse_Management.Models.DTO.LoginRequestDTO) on controller Warehouse_Management.Controllers.AuthController (Warehouse Management).
2025-02-22 22:25:42.986 +07:00 [INF] Login attempt for username: ha@example.com
2025-02-22 22:25:42.998 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-02-22 22:25:43.145 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-02-22 22:25:43.156 +07:00 [INF] Login successful for user: ha@example.com
2025-02-22 22:25:43.156 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:25:43.161 +07:00 [INF] Executed action Warehouse_Management.Controllers.AuthController.Login (Warehouse Management) in 182.2699ms
2025-02-22 22:25:43.162 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.AuthController.Login (Warehouse Management)'
2025-02-22 22:25:43.163 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Auth/login - 200 null application/json; charset=utf-8 188.0736ms
2025-02-22 22:26:16.012 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Product - application/json 114
2025-02-22 22:26:16.025 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 22:26:16.026 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(Warehouse_Management.Models.DTO.Product.CreateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 22:26:16.132 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Barcode], [BasePrice], [CreatedAt], [Description], [ProductName], [SKU], [UpdatedAt], [UserId])
OUTPUT INSERTED.[ProductId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-02-22 22:26:16.152 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:26:16.154 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management) in 126.4077ms
2025-02-22 22:26:16.154 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 22:26:16.156 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Product - 201 null application/json; charset=utf-8 143.5595ms
2025-02-22 22:26:25.426 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7190/api/Product/5 - null null
2025-02-22 22:26:25.428 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management)'
2025-02-22 22:26:25.428 +07:00 [INF] Route matched with {action = "DeleteProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteProduct(Int32) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 22:26:25.432 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 22:26:25.446 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Products]
OUTPUT 1
WHERE [ProductId] = @p0;
2025-02-22 22:26:25.450 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:26:25.452 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management) in 23.2048ms
2025-02-22 22:26:25.455 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.DeleteProduct (Warehouse Management)'
2025-02-22 22:26:25.458 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7190/api/Product/5 - 200 null application/json; charset=utf-8 31.8116ms
2025-02-22 22:26:47.668 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Shelf - application/json 88
2025-02-22 22:26:47.673 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ShelfController.CreateShelf (Warehouse Management)'
2025-02-22 22:26:47.677 +07:00 [INF] Route matched with {action = "CreateShelf", controller = "Shelf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateShelf(Warehouse_Management.Models.DTO.Shelf.CreateShelfDTO) on controller Warehouse_Management.Controllers.ShelfController (Warehouse Management).
2025-02-22 22:26:47.709 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__code_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Shelves] AS [s]
        WHERE [s].[Code] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-02-22 22:26:47.735 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Shelves] ([Capacity], [Code], [CreatedAt], [IsActive], [Location], [Name], [UpdatedAt], [UserId])
OUTPUT INSERTED.[ShelfId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-02-22 22:26:47.742 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:26:47.744 +07:00 [INF] Executed action Warehouse_Management.Controllers.ShelfController.CreateShelf (Warehouse Management) in 65.6913ms
2025-02-22 22:26:47.745 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ShelfController.CreateShelf (Warehouse Management)'
2025-02-22 22:26:47.746 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Shelf - 201 null application/json; charset=utf-8 77.7254ms
2025-02-22 22:26:57.863 +07:00 [INF] Request starting HTTP/2 DELETE https://localhost:7190/api/Shelf/2 - null null
2025-02-22 22:26:57.865 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ShelfController.DeleteProduct (Warehouse Management)'
2025-02-22 22:26:57.868 +07:00 [INF] Route matched with {action = "DeleteProduct", controller = "Shelf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteProduct(Int32) on controller Warehouse_Management.Controllers.ShelfController (Warehouse Management).
2025-02-22 22:26:57.913 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a0].[Status]
FROM [Shelves] AS [s]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'ApplicationUser'
) AS [a0] ON [s].[UserId] = [a0].[Id]
WHERE [s].[ShelfId] = @__id_0
2025-02-22 22:26:57.924 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Shelves]
OUTPUT 1
WHERE [ShelfId] = @p0;
2025-02-22 22:26:57.928 +07:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-02-22 22:26:57.928 +07:00 [INF] Executed action Warehouse_Management.Controllers.ShelfController.DeleteProduct (Warehouse Management) in 59.1422ms
2025-02-22 22:26:57.929 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ShelfController.DeleteProduct (Warehouse Management)'
2025-02-22 22:26:57.929 +07:00 [INF] Request finished HTTP/2 DELETE https://localhost:7190/api/Shelf/2 - 204 null null 66.1622ms
2025-02-22 22:34:13.378 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/StockTransaction - application/json 82
2025-02-22 22:34:13.385 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 22:34:13.387 +07:00 [INF] Route matched with {action = "CreateTransaction", controller = "StockTransaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTransaction(Warehouse_Management.Models.DTO.StockTransaction.CreateStockTransactionDTO) on controller Warehouse_Management.Controllers.StockTransactionController (Warehouse Management).
2025-02-22 22:34:13.448 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId]
FROM [Lots] AS [l]
INNER JOIN [Products] AS [p] ON [l].[ProductId] = [p].[ProductId]
INNER JOIN [Shelves] AS [s] ON [l].[ShelfId] = [s].[ShelfId]
WHERE [l].[LotId] = @__id_0
2025-02-22 22:34:13.476 +07:00 [ERR] Lỗi xảy ra trong LotService
System.Collections.Generic.KeyNotFoundException: Không tìm thấy lô hàng với ID 1.
   at Warehouse_Management.Services.Service.LotService.GetLotByIdAsync(Int32 id) in D:\SWD_BE\src be\Warehouse Management\Services\Service\LotService.cs:line 108
2025-02-22 22:34:13.508 +07:00 [ERR] Lỗi xảy ra trong StockTransactionService
System.Collections.Generic.KeyNotFoundException: Lô hàng với ID 1 không tồn tại.
   at Warehouse_Management.Services.Service.StockTransactionService.CreateTransactionAsync(CreateStockTransactionDTO dto, String userId) in D:\SWD_BE\src be\Warehouse Management\Services\Service\StockTransactionService.cs:line 49
2025-02-22 22:34:13.520 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:34:13.521 +07:00 [INF] Executed action Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management) in 132.8542ms
2025-02-22 22:34:13.522 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 22:34:13.523 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/StockTransaction - 404 null application/json; charset=utf-8 146.7203ms
2025-02-22 22:34:36.263 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Product/by-id/1 - null null
2025-02-22 22:34:36.265 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.GetProductById (Warehouse Management)'
2025-02-22 22:34:36.268 +07:00 [INF] Route matched with {action = "GetProductById", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProductById(Int32) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 22:34:36.273 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 22:34:36.276 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:34:36.276 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.GetProductById (Warehouse Management) in 7.7187ms
2025-02-22 22:34:36.277 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.GetProductById (Warehouse Management)'
2025-02-22 22:34:36.278 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Product/by-id/1 - 200 null application/json; charset=utf-8 14.8619ms
2025-02-22 22:36:34.292 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Supplier - application/json 78
2025-02-22 22:36:34.299 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.SupplierController.CreateSupplier (Warehouse Management)'
2025-02-22 22:36:34.302 +07:00 [INF] Route matched with {action = "CreateSupplier", controller = "Supplier"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateSupplier(Warehouse_Management.Models.DTO.Supplier.CreateSupplierDTO) on controller Warehouse_Management.Controllers.SupplierController (Warehouse Management).
2025-02-22 22:36:34.328 +07:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@__email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SupplierId], [s].[CreateAt], [s].[Email], [s].[IsDeleted], [s].[Name], [s].[Phone]
FROM [Suppliers] AS [s]
WHERE [s].[Email] = @__email_0
2025-02-22 22:36:34.339 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Warehouse_Management.Data.WareHouseDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsDeleted'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:2fe85634-b988-4c2b-852d-4ca97a70b29b
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsDeleted'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:2fe85634-b988-4c2b-852d-4ca97a70b29b
Error Number:207,State:1,Class:16
2025-02-22 22:36:34.376 +07:00 [ERR] Invalid column name 'IsDeleted'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsDeleted'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Warehouse_Management.Repositories.Repository.SupplierRepository.GetByEmailAsync(String email) in D:\SWD_BE\src be\Warehouse Management\Repositories\Repository\SupplierRepository.cs:line 43
   at Warehouse_Management.Services.Service.SupplierService.CreateSupplierAsync(CreateSupplierDTO dto) in D:\SWD_BE\src be\Warehouse Management\Services\Service\SupplierService.cs:line 30
ClientConnectionId:2fe85634-b988-4c2b-852d-4ca97a70b29b
Error Number:207,State:1,Class:16
2025-02-22 22:36:34.381 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:36:34.381 +07:00 [INF] Executed action Warehouse_Management.Controllers.SupplierController.CreateSupplier (Warehouse Management) in 77.8701ms
2025-02-22 22:36:34.384 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.SupplierController.CreateSupplier (Warehouse Management)'
2025-02-22 22:36:34.386 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Supplier - 500 null application/json; charset=utf-8 93.777ms
2025-02-22 22:48:28.297 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:48:28.316 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:48:28.317 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:48:28.596 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-22 22:48:28.606 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-22 22:48:28.618 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-22 22:48:28.654 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-22 22:48:28.660 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-22 22:48:28.660 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-22 22:48:28.663 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-22 22:48:28.670 +07:00 [INF] Applying migration '20250206025939_FixDb'.
2025-02-22 22:48:28.701 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [AspNetRoles]
WHERE [Id] = N'373e112e - 121b - 4f3f - bb3e - dc30c08b9999';
SELECT @@ROWCOUNT;
2025-02-22 22:48:28.705 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [AspNetRoles]
WHERE [Id] = N'9116bb38-85b1-4345-bf4a-7c0819a8ef3b';
SELECT @@ROWCOUNT;
2025-02-22 22:48:28.720 +07:00 [ERR] Failed executing DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ConcurrencyStamp', N'Name', N'NormalizedName') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [ConcurrencyStamp], [Name], [NormalizedName])
VALUES (N'0a589cd2-2113-4106-901d-aba2518cc5b0', NULL, N'Admin', N'ADMIN'),
(N'73373929-3552-4b5f-97c5-4f55c0ce0d0b', NULL, N'Staff', N'STAFF'),
(N'de3be95b-1b82-4803-874a-0cf0e90dabab', NULL, N'Manager', N'MANAGER');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ConcurrencyStamp', N'Name', N'NormalizedName') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-02-22 22:48:36.358 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 22:48:36.599 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 22:48:36.600 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 22:48:36.603 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 22:48:36.604 +07:00 [INF] Hosting environment: Development
2025-02-22 22:48:36.604 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 22:48:37.536 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 22:48:37.716 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 188.3735ms
2025-02-22 22:48:37.765 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 22:48:37.765 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 22:48:37.770 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 4.9971ms
2025-02-22 22:48:37.778 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 13.4017ms
2025-02-22 22:48:37.789 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 22:48:37.836 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.8753ms
2025-02-22 22:48:38.178 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 22:48:38.354 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 176.5171ms
2025-02-22 22:49:08.028 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Supplier - application/json 78
2025-02-22 22:49:08.118 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:49:08 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 22:49:08.141 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:49:08 PM'.
2025-02-22 22:49:08.143 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.SupplierController.CreateSupplier (Warehouse Management)'
2025-02-22 22:49:08.163 +07:00 [INF] Route matched with {action = "CreateSupplier", controller = "Supplier"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateSupplier(Warehouse_Management.Models.DTO.Supplier.CreateSupplierDTO) on controller Warehouse_Management.Controllers.SupplierController (Warehouse Management).
2025-02-22 22:49:08.875 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:49:08.876 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:49:08.877 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 22:49:09.370 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SupplierId], [s].[CreateAt], [s].[Email], [s].[IsDeleted], [s].[Name], [s].[Phone]
FROM [Suppliers] AS [s]
WHERE [s].[Email] = @__email_0
2025-02-22 22:49:09.509 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Suppliers] ([CreateAt], [Email], [IsDeleted], [Name], [Phone])
OUTPUT INSERTED.[SupplierId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-02-22 22:49:09.536 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:49:09.561 +07:00 [INF] Executed action Warehouse_Management.Controllers.SupplierController.CreateSupplier (Warehouse Management) in 1394.0029ms
2025-02-22 22:49:09.562 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.SupplierController.CreateSupplier (Warehouse Management)'
2025-02-22 22:49:09.568 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Supplier - 201 null application/json; charset=utf-8 1539.3794ms
2025-02-22 22:50:06.170 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/StockTransaction - application/json 83
2025-02-22 22:50:06.174 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:50:06 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 22:50:06.179 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:50:06 PM'.
2025-02-22 22:50:06.181 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 22:50:06.188 +07:00 [INF] Route matched with {action = "CreateTransaction", controller = "StockTransaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTransaction(Warehouse_Management.Models.DTO.StockTransaction.CreateStockTransactionDTO) on controller Warehouse_Management.Controllers.StockTransactionController (Warehouse Management).
2025-02-22 22:50:06.207 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.SerializableError'.
2025-02-22 22:50:06.214 +07:00 [INF] Executed action Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management) in 24.9544ms
2025-02-22 22:50:06.215 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 22:50:06.216 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/StockTransaction - 400 null application/json; charset=utf-8 46.0113ms
2025-02-22 22:50:19.689 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/StockTransaction - application/json 84
2025-02-22 22:50:19.694 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:50:19 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 22:50:19.696 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 3:50:19 PM'.
2025-02-22 22:50:19.697 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 22:50:19.699 +07:00 [INF] Route matched with {action = "CreateTransaction", controller = "StockTransaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTransaction(Warehouse_Management.Models.DTO.StockTransaction.CreateStockTransactionDTO) on controller Warehouse_Management.Controllers.StockTransactionController (Warehouse Management).
2025-02-22 22:50:19.705 +07:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-22 22:50:19.713 +07:00 [INF] Executed action Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management) in 13.3305ms
2025-02-22 22:50:19.715 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 22:50:19.715 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/StockTransaction - 401 null application/json; charset=utf-8 26.0994ms
2025-02-22 22:53:50.413 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Auth/login - application/json 60
2025-02-22 22:53:50.419 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.AuthController.Login (Warehouse Management)'
2025-02-22 22:53:50.423 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Warehouse_Management.Models.DTO.LoginRequestDTO) on controller Warehouse_Management.Controllers.AuthController (Warehouse Management).
2025-02-22 22:53:50.435 +07:00 [INF] Login attempt for username: ha@example.com
2025-02-22 22:53:50.465 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-02-22 22:53:50.608 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-02-22 22:53:50.618 +07:00 [INF] Login successful for user: ha@example.com
2025-02-22 22:53:50.619 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:53:50.622 +07:00 [INF] Executed action Warehouse_Management.Controllers.AuthController.Login (Warehouse Management) in 198.0052ms
2025-02-22 22:53:50.623 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.AuthController.Login (Warehouse Management)'
2025-02-22 22:53:50.624 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Auth/login - 200 null application/json; charset=utf-8 211.9926ms
2025-02-22 22:54:09.627 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/StockTransaction - application/json 84
2025-02-22 22:54:09.636 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 22:54:09.637 +07:00 [INF] Route matched with {action = "CreateTransaction", controller = "StockTransaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTransaction(Warehouse_Management.Models.DTO.StockTransaction.CreateStockTransactionDTO) on controller Warehouse_Management.Controllers.StockTransactionController (Warehouse Management).
2025-02-22 22:54:09.724 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId]
FROM [Lots] AS [l]
INNER JOIN [Products] AS [p] ON [l].[ProductId] = [p].[ProductId]
INNER JOIN [Shelves] AS [s] ON [l].[ShelfId] = [s].[ShelfId]
WHERE [l].[LotId] = @__id_0
2025-02-22 22:54:09.756 +07:00 [ERR] Lỗi xảy ra trong LotService
System.Collections.Generic.KeyNotFoundException: Không tìm thấy lô hàng với ID 1.
   at Warehouse_Management.Services.Service.LotService.GetLotByIdAsync(Int32 id) in D:\SWD_BE\src be\Warehouse Management\Services\Service\LotService.cs:line 108
2025-02-22 22:54:09.783 +07:00 [ERR] Lỗi xảy ra trong StockTransactionService
System.Collections.Generic.KeyNotFoundException: Lô hàng với ID 1 không tồn tại.
   at Warehouse_Management.Services.Service.StockTransactionService.CreateTransactionAsync(CreateStockTransactionDTO dto, String userId) in D:\SWD_BE\src be\Warehouse Management\Services\Service\StockTransactionService.cs:line 49
2025-02-22 22:54:09.795 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:54:09.797 +07:00 [INF] Executed action Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management) in 159.0554ms
2025-02-22 22:54:09.798 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 22:54:09.798 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/StockTransaction - 404 null application/json; charset=utf-8 171.942ms
2025-02-22 22:55:12.432 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Lot - application/json 176
2025-02-22 22:55:12.438 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.LotController.CreateLot (Warehouse Management)'
2025-02-22 22:55:12.440 +07:00 [INF] Route matched with {action = "CreateLot", controller = "Lot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLot(Warehouse_Management.Models.DTO.Lot.CreateLotDTO) on controller Warehouse_Management.Controllers.LotController (Warehouse Management).
2025-02-22 22:55:12.462 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 22:55:12.510 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a0].[Status]
FROM [Shelves] AS [s]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'ApplicationUser'
) AS [a0] ON [s].[UserId] = [a0].[Id]
WHERE [s].[ShelfId] = @__id_0
2025-02-22 22:55:12.558 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Lots] ([CreateAt], [ExpiryDate], [LotCode], [ManufactureDate], [ProductId], [Quantity], [ShelfId], [Status], [UpdateAt], [UserId])
OUTPUT INSERTED.[LotId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-02-22 22:55:12.574 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'Warehouse_Management.Data.WareHouseDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Lots_Shelves_ShelfId". The conflict occurred in database "WarehouseManagerment", table "dbo.Shelves", column 'ShelfId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d43fb0c7-831f-447d-b7f0-9b70b95ca12e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Lots_Shelves_ShelfId". The conflict occurred in database "WarehouseManagerment", table "dbo.Shelves", column 'ShelfId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d43fb0c7-831f-447d-b7f0-9b70b95ca12e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-22 22:55:12.631 +07:00 [ERR] Lỗi xảy ra trong LotService
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Lots_Shelves_ShelfId". The conflict occurred in database "WarehouseManagerment", table "dbo.Shelves", column 'ShelfId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d43fb0c7-831f-447d-b7f0-9b70b95ca12e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Warehouse_Management.Repositories.Repository.LotRepository.SaveChangesAsync() in D:\SWD_BE\src be\Warehouse Management\Repositories\Repository\LotRepository.cs:line 47
   at Warehouse_Management.Services.Service.LotService.CreateLotAsync(CreateLotDTO dto) in D:\SWD_BE\src be\Warehouse Management\Services\Service\LotService.cs:line 66
2025-02-22 22:55:12.638 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:55:12.641 +07:00 [INF] Executed action Warehouse_Management.Controllers.LotController.CreateLot (Warehouse Management) in 199.194ms
2025-02-22 22:55:12.646 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.LotController.CreateLot (Warehouse Management)'
2025-02-22 22:55:12.647 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Lot - 500 null application/json; charset=utf-8 214.6588ms
2025-02-22 22:55:31.928 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Lot - application/json 176
2025-02-22 22:55:31.929 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.LotController.CreateLot (Warehouse Management)'
2025-02-22 22:55:31.930 +07:00 [INF] Route matched with {action = "CreateLot", controller = "Lot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLot(Warehouse_Management.Models.DTO.Lot.CreateLotDTO) on controller Warehouse_Management.Controllers.LotController (Warehouse Management).
2025-02-22 22:55:31.936 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 22:55:31.941 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a0].[Status]
FROM [Shelves] AS [s]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'ApplicationUser'
) AS [a0] ON [s].[UserId] = [a0].[Id]
WHERE [s].[ShelfId] = @__id_0
2025-02-22 22:55:31.946 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Lots] ([CreateAt], [ExpiryDate], [LotCode], [ManufactureDate], [ProductId], [Quantity], [ShelfId], [Status], [UpdateAt], [UserId])
OUTPUT INSERTED.[LotId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-02-22 22:55:31.950 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'Warehouse_Management.Data.WareHouseDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Lots_Shelves_ShelfId". The conflict occurred in database "WarehouseManagerment", table "dbo.Shelves", column 'ShelfId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d43fb0c7-831f-447d-b7f0-9b70b95ca12e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Lots_Shelves_ShelfId". The conflict occurred in database "WarehouseManagerment", table "dbo.Shelves", column 'ShelfId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d43fb0c7-831f-447d-b7f0-9b70b95ca12e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-22 22:55:31.992 +07:00 [ERR] Lỗi xảy ra trong LotService
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Lots_Shelves_ShelfId". The conflict occurred in database "WarehouseManagerment", table "dbo.Shelves", column 'ShelfId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d43fb0c7-831f-447d-b7f0-9b70b95ca12e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Warehouse_Management.Repositories.Repository.LotRepository.SaveChangesAsync() in D:\SWD_BE\src be\Warehouse Management\Repositories\Repository\LotRepository.cs:line 47
   at Warehouse_Management.Services.Service.LotService.CreateLotAsync(CreateLotDTO dto) in D:\SWD_BE\src be\Warehouse Management\Services\Service\LotService.cs:line 66
2025-02-22 22:55:31.997 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:55:31.997 +07:00 [INF] Executed action Warehouse_Management.Controllers.LotController.CreateLot (Warehouse Management) in 66.9795ms
2025-02-22 22:55:31.998 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.LotController.CreateLot (Warehouse Management)'
2025-02-22 22:55:31.999 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Lot - 500 null application/json; charset=utf-8 71.4762ms
2025-02-22 22:56:13.737 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Shelf/1 - null null
2025-02-22 22:56:13.743 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ShelfController.GetShelfById (Warehouse Management)'
2025-02-22 22:56:13.752 +07:00 [INF] Route matched with {action = "GetShelfById", controller = "Shelf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetShelfById(Int32) on controller Warehouse_Management.Controllers.ShelfController (Warehouse Management).
2025-02-22 22:56:13.760 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a0].[Status]
FROM [Shelves] AS [s]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'ApplicationUser'
) AS [a0] ON [s].[UserId] = [a0].[Id]
WHERE [s].[ShelfId] = @__id_0
2025-02-22 22:56:13.762 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:56:13.763 +07:00 [INF] Executed action Warehouse_Management.Controllers.ShelfController.GetShelfById (Warehouse Management) in 10.0144ms
2025-02-22 22:56:13.764 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ShelfController.GetShelfById (Warehouse Management)'
2025-02-22 22:56:13.766 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Shelf/1 - 404 null application/json; charset=utf-8 29.0453ms
2025-02-22 22:56:43.305 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Shelf - application/json 91
2025-02-22 22:56:43.310 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ShelfController.CreateShelf (Warehouse Management)'
2025-02-22 22:56:43.314 +07:00 [INF] Route matched with {action = "CreateShelf", controller = "Shelf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateShelf(Warehouse_Management.Models.DTO.Shelf.CreateShelfDTO) on controller Warehouse_Management.Controllers.ShelfController (Warehouse Management).
2025-02-22 22:56:43.335 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__code_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Shelves] AS [s]
        WHERE [s].[Code] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-02-22 22:56:43.356 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Shelves] ([Capacity], [Code], [CreatedAt], [IsActive], [Location], [Name], [UpdatedAt], [UserId])
OUTPUT INSERTED.[ShelfId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-02-22 22:56:43.361 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 22:56:43.364 +07:00 [INF] Executed action Warehouse_Management.Controllers.ShelfController.CreateShelf (Warehouse Management) in 48.5409ms
2025-02-22 22:56:43.364 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ShelfController.CreateShelf (Warehouse Management)'
2025-02-22 22:56:43.365 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Shelf - 201 null application/json; charset=utf-8 59.6635ms
2025-02-22 23:00:38.785 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Lot - application/json 176
2025-02-22 23:00:38.792 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.LotController.CreateLot (Warehouse Management)'
2025-02-22 23:00:38.793 +07:00 [INF] Route matched with {action = "CreateLot", controller = "Lot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLot(Warehouse_Management.Models.DTO.Lot.CreateLotDTO) on controller Warehouse_Management.Controllers.LotController (Warehouse Management).
2025-02-22 23:00:38.801 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 23:00:38.819 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a0].[Status]
FROM [Shelves] AS [s]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'ApplicationUser'
) AS [a0] ON [s].[UserId] = [a0].[Id]
WHERE [s].[ShelfId] = @__id_0
2025-02-22 23:00:38.838 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Lots] ([CreateAt], [ExpiryDate], [LotCode], [ManufactureDate], [ProductId], [Quantity], [ShelfId], [Status], [UpdateAt], [UserId])
OUTPUT INSERTED.[LotId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-02-22 23:00:38.847 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:00:38.850 +07:00 [INF] Executed action Warehouse_Management.Controllers.LotController.CreateLot (Warehouse Management) in 55.9602ms
2025-02-22 23:00:38.851 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.LotController.CreateLot (Warehouse Management)'
2025-02-22 23:00:38.852 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Lot - 201 null application/json; charset=utf-8 67.6147ms
2025-02-22 23:00:56.969 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Lot?pageNumber=1&pageSize=10 - null null
2025-02-22 23:00:56.971 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.LotController.GetAllLots (Warehouse Management)'
2025-02-22 23:00:56.974 +07:00 [INF] Route matched with {action = "GetAllLots", controller = "Lot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllLots(Int32, Int32) on controller Warehouse_Management.Controllers.LotController (Warehouse Management).
2025-02-22 23:00:57.024 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Lots] AS [l]
2025-02-22 23:00:57.036 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-02-22 23:00:57.037 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-02-22 23:00:57.056 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l0].[LotId], [l0].[CreateAt], [l0].[ExpiryDate], [l0].[LotCode], [l0].[ManufactureDate], [l0].[ProductId], [l0].[Quantity], [l0].[ShelfId], [l0].[Status], [l0].[UpdateAt], [l0].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId]
FROM (
    SELECT [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId]
    FROM [Lots] AS [l]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [l0]
INNER JOIN [Products] AS [p] ON [l0].[ProductId] = [p].[ProductId]
INNER JOIN [Shelves] AS [s] ON [l0].[ShelfId] = [s].[ShelfId]
2025-02-22 23:00:57.069 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:00:57.072 +07:00 [INF] Executed action Warehouse_Management.Controllers.LotController.GetAllLots (Warehouse Management) in 97.1967ms
2025-02-22 23:00:57.073 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.LotController.GetAllLots (Warehouse Management)'
2025-02-22 23:00:57.074 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Lot?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 104.8548ms
2025-02-22 23:01:15.623 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Lot/3 - null null
2025-02-22 23:01:15.625 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.LotController.GetLotById (Warehouse Management)'
2025-02-22 23:01:15.628 +07:00 [INF] Route matched with {action = "GetLotById", controller = "Lot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLotById(Int32) on controller Warehouse_Management.Controllers.LotController (Warehouse Management).
2025-02-22 23:01:15.639 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId]
FROM [Lots] AS [l]
INNER JOIN [Products] AS [p] ON [l].[ProductId] = [p].[ProductId]
INNER JOIN [Shelves] AS [s] ON [l].[ShelfId] = [s].[ShelfId]
WHERE [l].[LotId] = @__id_0
2025-02-22 23:01:15.642 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:01:15.643 +07:00 [INF] Executed action Warehouse_Management.Controllers.LotController.GetLotById (Warehouse Management) in 13.431ms
2025-02-22 23:01:15.643 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.LotController.GetLotById (Warehouse Management)'
2025-02-22 23:01:15.644 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Lot/3 - 200 null application/json; charset=utf-8 21.6361ms
2025-02-22 23:01:32.416 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Lot/2 - null null
2025-02-22 23:01:32.418 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.LotController.GetLotById (Warehouse Management)'
2025-02-22 23:01:32.419 +07:00 [INF] Route matched with {action = "GetLotById", controller = "Lot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLotById(Int32) on controller Warehouse_Management.Controllers.LotController (Warehouse Management).
2025-02-22 23:01:32.422 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId]
FROM [Lots] AS [l]
INNER JOIN [Products] AS [p] ON [l].[ProductId] = [p].[ProductId]
INNER JOIN [Shelves] AS [s] ON [l].[ShelfId] = [s].[ShelfId]
WHERE [l].[LotId] = @__id_0
2025-02-22 23:01:32.461 +07:00 [ERR] Lỗi xảy ra trong LotService
System.Collections.Generic.KeyNotFoundException: Không tìm thấy lô hàng với ID 2.
   at Warehouse_Management.Services.Service.LotService.GetLotByIdAsync(Int32 id) in D:\SWD_BE\src be\Warehouse Management\Services\Service\LotService.cs:line 108
2025-02-22 23:01:32.464 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:01:32.465 +07:00 [INF] Executed action Warehouse_Management.Controllers.LotController.GetLotById (Warehouse Management) in 45.4906ms
2025-02-22 23:01:32.466 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.LotController.GetLotById (Warehouse Management)'
2025-02-22 23:01:32.467 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Lot/2 - 500 null application/json; charset=utf-8 51.2083ms
2025-02-22 23:01:42.812 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Lot/2 - null null
2025-02-22 23:01:42.814 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.LotController.GetLotById (Warehouse Management)'
2025-02-22 23:01:42.815 +07:00 [INF] Route matched with {action = "GetLotById", controller = "Lot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLotById(Int32) on controller Warehouse_Management.Controllers.LotController (Warehouse Management).
2025-02-22 23:01:42.818 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId]
FROM [Lots] AS [l]
INNER JOIN [Products] AS [p] ON [l].[ProductId] = [p].[ProductId]
INNER JOIN [Shelves] AS [s] ON [l].[ShelfId] = [s].[ShelfId]
WHERE [l].[LotId] = @__id_0
2025-02-22 23:01:42.836 +07:00 [ERR] Lỗi xảy ra trong LotService
System.Collections.Generic.KeyNotFoundException: Không tìm thấy lô hàng với ID 2.
   at Warehouse_Management.Services.Service.LotService.GetLotByIdAsync(Int32 id) in D:\SWD_BE\src be\Warehouse Management\Services\Service\LotService.cs:line 108
2025-02-22 23:01:42.837 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:01:42.838 +07:00 [INF] Executed action Warehouse_Management.Controllers.LotController.GetLotById (Warehouse Management) in 22.0391ms
2025-02-22 23:01:42.838 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.LotController.GetLotById (Warehouse Management)'
2025-02-22 23:01:42.839 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Lot/2 - 500 null application/json; charset=utf-8 27.0525ms
2025-02-22 23:01:59.089 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Lot?pageNumber=2&pageSize=10 - null null
2025-02-22 23:01:59.091 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.LotController.GetAllLots (Warehouse Management)'
2025-02-22 23:01:59.092 +07:00 [INF] Route matched with {action = "GetAllLots", controller = "Lot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllLots(Int32, Int32) on controller Warehouse_Management.Controllers.LotController (Warehouse Management).
2025-02-22 23:01:59.096 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Lots] AS [l]
2025-02-22 23:01:59.106 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-02-22 23:01:59.109 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-02-22 23:01:59.129 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l0].[LotId], [l0].[CreateAt], [l0].[ExpiryDate], [l0].[LotCode], [l0].[ManufactureDate], [l0].[ProductId], [l0].[Quantity], [l0].[ShelfId], [l0].[Status], [l0].[UpdateAt], [l0].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId]
FROM (
    SELECT [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId]
    FROM [Lots] AS [l]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [l0]
INNER JOIN [Products] AS [p] ON [l0].[ProductId] = [p].[ProductId]
INNER JOIN [Shelves] AS [s] ON [l0].[ShelfId] = [s].[ShelfId]
2025-02-22 23:01:59.132 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:01:59.133 +07:00 [INF] Executed action Warehouse_Management.Controllers.LotController.GetAllLots (Warehouse Management) in 39.7821ms
2025-02-22 23:01:59.134 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.LotController.GetAllLots (Warehouse Management)'
2025-02-22 23:01:59.135 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Lot?pageNumber=2&pageSize=10 - 200 null application/json; charset=utf-8 46.1255ms
2025-02-22 23:02:04.141 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Lot?pageNumber=2&pageSize=1 - null null
2025-02-22 23:02:04.143 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.LotController.GetAllLots (Warehouse Management)'
2025-02-22 23:02:04.144 +07:00 [INF] Route matched with {action = "GetAllLots", controller = "Lot"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllLots(Int32, Int32) on controller Warehouse_Management.Controllers.LotController (Warehouse Management).
2025-02-22 23:02:04.148 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Lots] AS [l]
2025-02-22 23:02:04.169 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l0].[LotId], [l0].[CreateAt], [l0].[ExpiryDate], [l0].[LotCode], [l0].[ManufactureDate], [l0].[ProductId], [l0].[Quantity], [l0].[ShelfId], [l0].[Status], [l0].[UpdateAt], [l0].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId]
FROM (
    SELECT [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId]
    FROM [Lots] AS [l]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [l0]
INNER JOIN [Products] AS [p] ON [l0].[ProductId] = [p].[ProductId]
INNER JOIN [Shelves] AS [s] ON [l0].[ShelfId] = [s].[ShelfId]
2025-02-22 23:02:04.171 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:02:04.175 +07:00 [INF] Executed action Warehouse_Management.Controllers.LotController.GetAllLots (Warehouse Management) in 30.4809ms
2025-02-22 23:02:04.176 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.LotController.GetAllLots (Warehouse Management)'
2025-02-22 23:02:04.178 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Lot?pageNumber=2&pageSize=1 - 200 null application/json; charset=utf-8 36.8411ms
2025-02-22 23:08:00.451 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/StockTransaction - application/json 84
2025-02-22 23:08:00.459 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 23:08:00.461 +07:00 [INF] Route matched with {action = "CreateTransaction", controller = "StockTransaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTransaction(Warehouse_Management.Models.DTO.StockTransaction.CreateStockTransactionDTO) on controller Warehouse_Management.Controllers.StockTransactionController (Warehouse Management).
2025-02-22 23:08:00.469 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId]
FROM [Lots] AS [l]
INNER JOIN [Products] AS [p] ON [l].[ProductId] = [p].[ProductId]
INNER JOIN [Shelves] AS [s] ON [l].[ShelfId] = [s].[ShelfId]
WHERE [l].[LotId] = @__id_0
2025-02-22 23:08:00.474 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 23:08:00.488 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SupplierId], [s].[CreateAt], [s].[Email], [s].[IsDeleted], [s].[Name], [s].[Phone]
FROM [Suppliers] AS [s]
WHERE [s].[SupplierId] = @__id_0
2025-02-22 23:08:00.513 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId]
FROM [Lots] AS [l]
INNER JOIN [Products] AS [p] ON [l].[ProductId] = [p].[ProductId]
INNER JOIN [Shelves] AS [s] ON [l].[ShelfId] = [s].[ShelfId]
WHERE [l].[LotId] = @__id_0
2025-02-22 23:08:00.530 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [StockTransactions] ([LotId], [ProductId], [Quantity], [SupplierId], [TransactionDate], [Type], [UserId])
OUTPUT INSERTED.[TransactionId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-02-22 23:08:00.538 +07:00 [INF] Giao dịch kho đã tạo thành công: Loại: "IN", Sản phẩm: 1, Lô: 3, Số lượng: 12
2025-02-22 23:08:00.546 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:08:00.576 +07:00 [INF] Executed action Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management) in 114.6326ms
2025-02-22 23:08:00.578 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 23:08:00.579 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/StockTransaction - 201 null application/json; charset=utf-8 127.8272ms
2025-02-22 23:08:06.973 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/StockTransaction - application/json 84
2025-02-22 23:08:06.975 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 23:08:06.976 +07:00 [INF] Route matched with {action = "CreateTransaction", controller = "StockTransaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTransaction(Warehouse_Management.Models.DTO.StockTransaction.CreateStockTransactionDTO) on controller Warehouse_Management.Controllers.StockTransactionController (Warehouse Management).
2025-02-22 23:08:06.981 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId]
FROM [Lots] AS [l]
INNER JOIN [Products] AS [p] ON [l].[ProductId] = [p].[ProductId]
INNER JOIN [Shelves] AS [s] ON [l].[ShelfId] = [s].[ShelfId]
WHERE [l].[LotId] = @__id_0
2025-02-22 23:08:06.988 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 23:08:06.996 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SupplierId], [s].[CreateAt], [s].[Email], [s].[IsDeleted], [s].[Name], [s].[Phone]
FROM [Suppliers] AS [s]
WHERE [s].[SupplierId] = @__id_0
2025-02-22 23:08:07.035 +07:00 [ERR] No supplier found with ID 2
System.Collections.Generic.KeyNotFoundException: No supplier found with ID 2
   at Warehouse_Management.Services.Service.SupplierService.GetSupplierByIdAsync(Int32 id) in D:\SWD_BE\src be\Warehouse Management\Services\Service\SupplierService.cs:line 81
2025-02-22 23:08:07.057 +07:00 [ERR] Lỗi xảy ra trong StockTransactionService
System.Collections.Generic.KeyNotFoundException: Nhà cung cấp với ID 2 không tồn tại.
   at Warehouse_Management.Services.Service.StockTransactionService.CreateTransactionAsync(CreateStockTransactionDTO dto, String userId) in D:\SWD_BE\src be\Warehouse Management\Services\Service\StockTransactionService.cs:line 57
2025-02-22 23:08:07.059 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:08:07.060 +07:00 [INF] Executed action Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management) in 83.3477ms
2025-02-22 23:08:07.061 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 23:08:07.062 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/StockTransaction - 404 null application/json; charset=utf-8 89.9423ms
2025-02-22 23:10:39.278 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/StockTransaction - application/json 84
2025-02-22 23:10:39.284 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 23:10:39.285 +07:00 [INF] Route matched with {action = "CreateTransaction", controller = "StockTransaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTransaction(Warehouse_Management.Models.DTO.StockTransaction.CreateStockTransactionDTO) on controller Warehouse_Management.Controllers.StockTransactionController (Warehouse Management).
2025-02-22 23:10:39.293 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId]
FROM [Lots] AS [l]
INNER JOIN [Products] AS [p] ON [l].[ProductId] = [p].[ProductId]
INNER JOIN [Shelves] AS [s] ON [l].[ShelfId] = [s].[ShelfId]
WHERE [l].[LotId] = @__id_0
2025-02-22 23:10:39.297 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 23:10:39.299 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SupplierId], [s].[CreateAt], [s].[Email], [s].[IsDeleted], [s].[Name], [s].[Phone]
FROM [Suppliers] AS [s]
WHERE [s].[SupplierId] = @__id_0
2025-02-22 23:10:39.303 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId]
FROM [Lots] AS [l]
INNER JOIN [Products] AS [p] ON [l].[ProductId] = [p].[ProductId]
INNER JOIN [Shelves] AS [s] ON [l].[ShelfId] = [s].[ShelfId]
WHERE [l].[LotId] = @__id_0
2025-02-22 23:10:39.308 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [StockTransactions] ([LotId], [ProductId], [Quantity], [SupplierId], [TransactionDate], [Type], [UserId])
OUTPUT INSERTED.[TransactionId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-02-22 23:10:39.310 +07:00 [INF] Giao dịch kho đã tạo thành công: Loại: "IN", Sản phẩm: 1, Lô: 3, Số lượng: 12
2025-02-22 23:10:39.311 +07:00 [INF] Executing CreatedAtActionResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:10:39.312 +07:00 [INF] Executed action Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management) in 26.0964ms
2025-02-22 23:10:39.317 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 23:10:39.318 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/StockTransaction - 201 null application/json; charset=utf-8 39.754ms
2025-02-22 23:10:56.038 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/StockTransaction?StartDate=2025-02-22T16%3A10%3A39.3022653Z&EndDate=2025-02-22T16%3A10%3A39.3022653Z&ProductId=1&LotId=3&Type=0&Page=1&PageSize=10 - null null
2025-02-22 23:10:56.040 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management)'
2025-02-22 23:10:56.053 +07:00 [INF] Route matched with {action = "GetTransactions", controller = "StockTransaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTransactions(Warehouse_Management.Models.DTO.StockTransaction.TransactionFilterDTO) on controller Warehouse_Management.Controllers.StockTransactionController (Warehouse Management).
2025-02-22 23:10:56.109 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__filter_StartDate_0='?' (DbType = DateTime2), @__filter_EndDate_1='?' (DbType = DateTime2), @__filter_ProductId_2='?' (DbType = Int32), @__filter_LotId_3='?' (DbType = Int32), @__ToString_4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [StockTransactions] AS [s]
WHERE [s].[TransactionDate] >= @__filter_StartDate_0 AND [s].[TransactionDate] <= @__filter_EndDate_1 AND [s].[ProductId] = @__filter_ProductId_2 AND [s].[LotId] = @__filter_LotId_3 AND [s].[Type] = @__ToString_4
2025-02-22 23:10:56.143 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__filter_StartDate_0='?' (DbType = DateTime2), @__filter_EndDate_1='?' (DbType = DateTime2), @__filter_ProductId_2='?' (DbType = Int32), @__filter_LotId_3='?' (DbType = Int32), @__ToString_4='?' (Size = 4000), @__p_5='?' (DbType = Int32), @__p_6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s0].[TransactionId], [s0].[LotId], [s0].[ProductId], [s0].[Quantity], [s0].[SupplierId], [s0].[TransactionDate], [s0].[Type], [s0].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s1].[SupplierId], [s1].[CreateAt], [s1].[Email], [s1].[IsDeleted], [s1].[Name], [s1].[Phone], [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a0].[Status]
FROM (
    SELECT [s].[TransactionId], [s].[LotId], [s].[ProductId], [s].[Quantity], [s].[SupplierId], [s].[TransactionDate], [s].[Type], [s].[UserId]
    FROM [StockTransactions] AS [s]
    WHERE [s].[TransactionDate] >= @__filter_StartDate_0 AND [s].[TransactionDate] <= @__filter_EndDate_1 AND [s].[ProductId] = @__filter_ProductId_2 AND [s].[LotId] = @__filter_LotId_3 AND [s].[Type] = @__ToString_4
    ORDER BY [s].[TransactionDate] DESC
    OFFSET @__p_5 ROWS FETCH NEXT @__p_6 ROWS ONLY
) AS [s0]
INNER JOIN [Products] AS [p] ON [s0].[ProductId] = [p].[ProductId]
INNER JOIN [Suppliers] AS [s1] ON [s0].[SupplierId] = [s1].[SupplierId]
INNER JOIN [Lots] AS [l] ON [s0].[LotId] = [l].[LotId]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'ApplicationUser'
) AS [a0] ON [s0].[UserId] = [a0].[Id]
ORDER BY [s0].[TransactionDate] DESC
2025-02-22 23:10:56.158 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:10:56.161 +07:00 [INF] Executed action Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management) in 106.9204ms
2025-02-22 23:10:56.162 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management)'
2025-02-22 23:10:56.163 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/StockTransaction?StartDate=2025-02-22T16%3A10%3A39.3022653Z&EndDate=2025-02-22T16%3A10%3A39.3022653Z&ProductId=1&LotId=3&Type=0&Page=1&PageSize=10 - 200 null application/json; charset=utf-8 125.3185ms
2025-02-22 23:11:05.683 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/StockTransaction?StartDate=2025-02-22T16%3A10%3A39.3022653Z&EndDate=2025-02-22T16%3A10%3A39.3022653Z&ProductId=2&LotId=3&Type=0&Page=1&PageSize=10 - null null
2025-02-22 23:11:05.685 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management)'
2025-02-22 23:11:05.686 +07:00 [INF] Route matched with {action = "GetTransactions", controller = "StockTransaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTransactions(Warehouse_Management.Models.DTO.StockTransaction.TransactionFilterDTO) on controller Warehouse_Management.Controllers.StockTransactionController (Warehouse Management).
2025-02-22 23:11:05.690 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filter_StartDate_0='?' (DbType = DateTime2), @__filter_EndDate_1='?' (DbType = DateTime2), @__filter_ProductId_2='?' (DbType = Int32), @__filter_LotId_3='?' (DbType = Int32), @__ToString_4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [StockTransactions] AS [s]
WHERE [s].[TransactionDate] >= @__filter_StartDate_0 AND [s].[TransactionDate] <= @__filter_EndDate_1 AND [s].[ProductId] = @__filter_ProductId_2 AND [s].[LotId] = @__filter_LotId_3 AND [s].[Type] = @__ToString_4
2025-02-22 23:11:05.719 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__filter_StartDate_0='?' (DbType = DateTime2), @__filter_EndDate_1='?' (DbType = DateTime2), @__filter_ProductId_2='?' (DbType = Int32), @__filter_LotId_3='?' (DbType = Int32), @__ToString_4='?' (Size = 4000), @__p_5='?' (DbType = Int32), @__p_6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s0].[TransactionId], [s0].[LotId], [s0].[ProductId], [s0].[Quantity], [s0].[SupplierId], [s0].[TransactionDate], [s0].[Type], [s0].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s1].[SupplierId], [s1].[CreateAt], [s1].[Email], [s1].[IsDeleted], [s1].[Name], [s1].[Phone], [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a0].[Status]
FROM (
    SELECT [s].[TransactionId], [s].[LotId], [s].[ProductId], [s].[Quantity], [s].[SupplierId], [s].[TransactionDate], [s].[Type], [s].[UserId]
    FROM [StockTransactions] AS [s]
    WHERE [s].[TransactionDate] >= @__filter_StartDate_0 AND [s].[TransactionDate] <= @__filter_EndDate_1 AND [s].[ProductId] = @__filter_ProductId_2 AND [s].[LotId] = @__filter_LotId_3 AND [s].[Type] = @__ToString_4
    ORDER BY [s].[TransactionDate] DESC
    OFFSET @__p_5 ROWS FETCH NEXT @__p_6 ROWS ONLY
) AS [s0]
INNER JOIN [Products] AS [p] ON [s0].[ProductId] = [p].[ProductId]
INNER JOIN [Suppliers] AS [s1] ON [s0].[SupplierId] = [s1].[SupplierId]
INNER JOIN [Lots] AS [l] ON [s0].[LotId] = [l].[LotId]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'ApplicationUser'
) AS [a0] ON [s0].[UserId] = [a0].[Id]
ORDER BY [s0].[TransactionDate] DESC
2025-02-22 23:11:05.730 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:11:05.732 +07:00 [INF] Executed action Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management) in 45.5486ms
2025-02-22 23:11:05.734 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management)'
2025-02-22 23:11:05.736 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/StockTransaction?StartDate=2025-02-22T16%3A10%3A39.3022653Z&EndDate=2025-02-22T16%3A10%3A39.3022653Z&ProductId=2&LotId=3&Type=0&Page=1&PageSize=10 - 200 null application/json; charset=utf-8 52.971ms
2025-02-22 23:11:38.401 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/StockTransaction?StartDate=2025-02-22T16%3A10%3A39.3022653Z&EndDate=2025-02-22T16%3A10%3A39.3022653Z&ProductId=4&LotId=3&Type=0&Page=1&PageSize=10 - null null
2025-02-22 23:11:38.403 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management)'
2025-02-22 23:11:38.403 +07:00 [INF] Route matched with {action = "GetTransactions", controller = "StockTransaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTransactions(Warehouse_Management.Models.DTO.StockTransaction.TransactionFilterDTO) on controller Warehouse_Management.Controllers.StockTransactionController (Warehouse Management).
2025-02-22 23:11:38.407 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filter_StartDate_0='?' (DbType = DateTime2), @__filter_EndDate_1='?' (DbType = DateTime2), @__filter_ProductId_2='?' (DbType = Int32), @__filter_LotId_3='?' (DbType = Int32), @__ToString_4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [StockTransactions] AS [s]
WHERE [s].[TransactionDate] >= @__filter_StartDate_0 AND [s].[TransactionDate] <= @__filter_EndDate_1 AND [s].[ProductId] = @__filter_ProductId_2 AND [s].[LotId] = @__filter_LotId_3 AND [s].[Type] = @__ToString_4
2025-02-22 23:11:38.420 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__filter_StartDate_0='?' (DbType = DateTime2), @__filter_EndDate_1='?' (DbType = DateTime2), @__filter_ProductId_2='?' (DbType = Int32), @__filter_LotId_3='?' (DbType = Int32), @__ToString_4='?' (Size = 4000), @__p_5='?' (DbType = Int32), @__p_6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s0].[TransactionId], [s0].[LotId], [s0].[ProductId], [s0].[Quantity], [s0].[SupplierId], [s0].[TransactionDate], [s0].[Type], [s0].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s1].[SupplierId], [s1].[CreateAt], [s1].[Email], [s1].[IsDeleted], [s1].[Name], [s1].[Phone], [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a0].[Status]
FROM (
    SELECT [s].[TransactionId], [s].[LotId], [s].[ProductId], [s].[Quantity], [s].[SupplierId], [s].[TransactionDate], [s].[Type], [s].[UserId]
    FROM [StockTransactions] AS [s]
    WHERE [s].[TransactionDate] >= @__filter_StartDate_0 AND [s].[TransactionDate] <= @__filter_EndDate_1 AND [s].[ProductId] = @__filter_ProductId_2 AND [s].[LotId] = @__filter_LotId_3 AND [s].[Type] = @__ToString_4
    ORDER BY [s].[TransactionDate] DESC
    OFFSET @__p_5 ROWS FETCH NEXT @__p_6 ROWS ONLY
) AS [s0]
INNER JOIN [Products] AS [p] ON [s0].[ProductId] = [p].[ProductId]
INNER JOIN [Suppliers] AS [s1] ON [s0].[SupplierId] = [s1].[SupplierId]
INNER JOIN [Lots] AS [l] ON [s0].[LotId] = [l].[LotId]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'ApplicationUser'
) AS [a0] ON [s0].[UserId] = [a0].[Id]
ORDER BY [s0].[TransactionDate] DESC
2025-02-22 23:11:38.423 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:11:38.427 +07:00 [INF] Executed action Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management) in 22.6582ms
2025-02-22 23:11:38.429 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management)'
2025-02-22 23:11:38.431 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/StockTransaction?StartDate=2025-02-22T16%3A10%3A39.3022653Z&EndDate=2025-02-22T16%3A10%3A39.3022653Z&ProductId=4&LotId=3&Type=0&Page=1&PageSize=10 - 200 null application/json; charset=utf-8 29.5365ms
2025-02-22 23:11:44.384 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/StockTransaction?StartDate=2025-02-22T16%3A10%3A39.3022653Z&EndDate=2025-02-22T16%3A10%3A39.3022653Z&ProductId=5&LotId=3&Type=0&Page=1&PageSize=10 - null null
2025-02-22 23:11:44.386 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management)'
2025-02-22 23:11:44.387 +07:00 [INF] Route matched with {action = "GetTransactions", controller = "StockTransaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTransactions(Warehouse_Management.Models.DTO.StockTransaction.TransactionFilterDTO) on controller Warehouse_Management.Controllers.StockTransactionController (Warehouse Management).
2025-02-22 23:11:44.391 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filter_StartDate_0='?' (DbType = DateTime2), @__filter_EndDate_1='?' (DbType = DateTime2), @__filter_ProductId_2='?' (DbType = Int32), @__filter_LotId_3='?' (DbType = Int32), @__ToString_4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [StockTransactions] AS [s]
WHERE [s].[TransactionDate] >= @__filter_StartDate_0 AND [s].[TransactionDate] <= @__filter_EndDate_1 AND [s].[ProductId] = @__filter_ProductId_2 AND [s].[LotId] = @__filter_LotId_3 AND [s].[Type] = @__ToString_4
2025-02-22 23:11:44.394 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filter_StartDate_0='?' (DbType = DateTime2), @__filter_EndDate_1='?' (DbType = DateTime2), @__filter_ProductId_2='?' (DbType = Int32), @__filter_LotId_3='?' (DbType = Int32), @__ToString_4='?' (Size = 4000), @__p_5='?' (DbType = Int32), @__p_6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s0].[TransactionId], [s0].[LotId], [s0].[ProductId], [s0].[Quantity], [s0].[SupplierId], [s0].[TransactionDate], [s0].[Type], [s0].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s1].[SupplierId], [s1].[CreateAt], [s1].[Email], [s1].[IsDeleted], [s1].[Name], [s1].[Phone], [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a0].[Status]
FROM (
    SELECT [s].[TransactionId], [s].[LotId], [s].[ProductId], [s].[Quantity], [s].[SupplierId], [s].[TransactionDate], [s].[Type], [s].[UserId]
    FROM [StockTransactions] AS [s]
    WHERE [s].[TransactionDate] >= @__filter_StartDate_0 AND [s].[TransactionDate] <= @__filter_EndDate_1 AND [s].[ProductId] = @__filter_ProductId_2 AND [s].[LotId] = @__filter_LotId_3 AND [s].[Type] = @__ToString_4
    ORDER BY [s].[TransactionDate] DESC
    OFFSET @__p_5 ROWS FETCH NEXT @__p_6 ROWS ONLY
) AS [s0]
INNER JOIN [Products] AS [p] ON [s0].[ProductId] = [p].[ProductId]
INNER JOIN [Suppliers] AS [s1] ON [s0].[SupplierId] = [s1].[SupplierId]
INNER JOIN [Lots] AS [l] ON [s0].[LotId] = [l].[LotId]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'ApplicationUser'
) AS [a0] ON [s0].[UserId] = [a0].[Id]
ORDER BY [s0].[TransactionDate] DESC
2025-02-22 23:11:44.396 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:11:44.397 +07:00 [INF] Executed action Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management) in 8.8423ms
2025-02-22 23:11:44.398 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management)'
2025-02-22 23:11:44.399 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/StockTransaction?StartDate=2025-02-22T16%3A10%3A39.3022653Z&EndDate=2025-02-22T16%3A10%3A39.3022653Z&ProductId=5&LotId=3&Type=0&Page=1&PageSize=10 - 200 null application/json; charset=utf-8 14.7549ms
2025-02-22 23:11:49.748 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/StockTransaction?StartDate=2025-02-22T16%3A10%3A39.3022653Z&EndDate=2025-02-22T16%3A10%3A39.3022653Z&ProductId=5&LotId=1&Type=0&Page=1&PageSize=10 - null null
2025-02-22 23:11:49.750 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management)'
2025-02-22 23:11:49.751 +07:00 [INF] Route matched with {action = "GetTransactions", controller = "StockTransaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTransactions(Warehouse_Management.Models.DTO.StockTransaction.TransactionFilterDTO) on controller Warehouse_Management.Controllers.StockTransactionController (Warehouse Management).
2025-02-22 23:11:49.755 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filter_StartDate_0='?' (DbType = DateTime2), @__filter_EndDate_1='?' (DbType = DateTime2), @__filter_ProductId_2='?' (DbType = Int32), @__filter_LotId_3='?' (DbType = Int32), @__ToString_4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [StockTransactions] AS [s]
WHERE [s].[TransactionDate] >= @__filter_StartDate_0 AND [s].[TransactionDate] <= @__filter_EndDate_1 AND [s].[ProductId] = @__filter_ProductId_2 AND [s].[LotId] = @__filter_LotId_3 AND [s].[Type] = @__ToString_4
2025-02-22 23:11:49.758 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__filter_StartDate_0='?' (DbType = DateTime2), @__filter_EndDate_1='?' (DbType = DateTime2), @__filter_ProductId_2='?' (DbType = Int32), @__filter_LotId_3='?' (DbType = Int32), @__ToString_4='?' (Size = 4000), @__p_5='?' (DbType = Int32), @__p_6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s0].[TransactionId], [s0].[LotId], [s0].[ProductId], [s0].[Quantity], [s0].[SupplierId], [s0].[TransactionDate], [s0].[Type], [s0].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s1].[SupplierId], [s1].[CreateAt], [s1].[Email], [s1].[IsDeleted], [s1].[Name], [s1].[Phone], [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName], [a0].[Status]
FROM (
    SELECT [s].[TransactionId], [s].[LotId], [s].[ProductId], [s].[Quantity], [s].[SupplierId], [s].[TransactionDate], [s].[Type], [s].[UserId]
    FROM [StockTransactions] AS [s]
    WHERE [s].[TransactionDate] >= @__filter_StartDate_0 AND [s].[TransactionDate] <= @__filter_EndDate_1 AND [s].[ProductId] = @__filter_ProductId_2 AND [s].[LotId] = @__filter_LotId_3 AND [s].[Type] = @__ToString_4
    ORDER BY [s].[TransactionDate] DESC
    OFFSET @__p_5 ROWS FETCH NEXT @__p_6 ROWS ONLY
) AS [s0]
INNER JOIN [Products] AS [p] ON [s0].[ProductId] = [p].[ProductId]
INNER JOIN [Suppliers] AS [s1] ON [s0].[SupplierId] = [s1].[SupplierId]
INNER JOIN [Lots] AS [l] ON [s0].[LotId] = [l].[LotId]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'ApplicationUser'
) AS [a0] ON [s0].[UserId] = [a0].[Id]
ORDER BY [s0].[TransactionDate] DESC
2025-02-22 23:11:49.760 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:11:49.761 +07:00 [INF] Executed action Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management) in 8.6696ms
2025-02-22 23:11:49.762 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.StockTransactionController.GetTransactions (Warehouse Management)'
2025-02-22 23:11:49.763 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/StockTransaction?StartDate=2025-02-22T16%3A10%3A39.3022653Z&EndDate=2025-02-22T16%3A10%3A39.3022653Z&ProductId=5&LotId=1&Type=0&Page=1&PageSize=10 - 200 null application/json; charset=utf-8 14.4836ms
2025-02-22 23:12:03.674 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/StockTransaction - application/json 84
2025-02-22 23:12:03.676 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 23:12:03.677 +07:00 [INF] Route matched with {action = "CreateTransaction", controller = "StockTransaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTransaction(Warehouse_Management.Models.DTO.StockTransaction.CreateStockTransactionDTO) on controller Warehouse_Management.Controllers.StockTransactionController (Warehouse Management).
2025-02-22 23:12:03.682 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[LotId], [l].[CreateAt], [l].[ExpiryDate], [l].[LotCode], [l].[ManufactureDate], [l].[ProductId], [l].[Quantity], [l].[ShelfId], [l].[Status], [l].[UpdateAt], [l].[UserId], [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId], [s].[ShelfId], [s].[Capacity], [s].[Code], [s].[CreatedAt], [s].[IsActive], [s].[Location], [s].[Name], [s].[UpdatedAt], [s].[UserId]
FROM [Lots] AS [l]
INNER JOIN [Products] AS [p] ON [l].[ProductId] = [p].[ProductId]
INNER JOIN [Shelves] AS [s] ON [l].[ShelfId] = [s].[ShelfId]
WHERE [l].[LotId] = @__id_0
2025-02-22 23:12:03.691 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 23:12:03.728 +07:00 [ERR] Lỗi xảy ra trong StockTransactionService
System.Collections.Generic.KeyNotFoundException: Sản phẩm với ID 2 không tồn tại.
   at Warehouse_Management.Services.Service.StockTransactionService.CreateTransactionAsync(CreateStockTransactionDTO dto, String userId) in D:\SWD_BE\src be\Warehouse Management\Services\Service\StockTransactionService.cs:line 53
2025-02-22 23:12:03.731 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:12:03.732 +07:00 [INF] Executed action Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management) in 54.1048ms
2025-02-22 23:12:03.733 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.StockTransactionController.CreateTransaction (Warehouse Management)'
2025-02-22 23:12:03.734 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/StockTransaction - 404 null application/json; charset=utf-8 59.773ms
2025-02-22 23:41:27.509 +07:00 [INF] User profile is available. Using 'C:\Users\nguye\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-22 23:41:27.758 +07:00 [INF] Now listening on: https://localhost:7190
2025-02-22 23:41:27.759 +07:00 [INF] Now listening on: http://localhost:5299
2025-02-22 23:41:27.762 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-22 23:41:27.763 +07:00 [INF] Hosting environment: Development
2025-02-22 23:41:27.763 +07:00 [INF] Content root path: D:\SWD_BE\src be\Warehouse Management
2025-02-22 23:41:28.408 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.html - null null
2025-02-22 23:41:28.571 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.html - 200 null text/html;charset=utf-8 164.2427ms
2025-02-22 23:41:28.619 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/index.js - null null
2025-02-22 23:41:28.622 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/index.js - 200 null application/javascript;charset=utf-8 3.4026ms
2025-02-22 23:41:28.631 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - null null
2025-02-22 23:41:28.635 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/_vs/browserLink - null null
2025-02-22 23:41:28.662 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_framework/aspnetcore-browser-refresh.js - 200 13776 application/javascript; charset=utf-8 31.3601ms
2025-02-22 23:41:28.694 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.1849ms
2025-02-22 23:41:28.989 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - null null
2025-02-22 23:41:29.149 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 159.2081ms
2025-02-22 23:42:28.459 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Platform - application/json 64
2025-02-22 23:42:29.368 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:42:29 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 23:42:29.393 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:42:29 PM'.
2025-02-22 23:42:29.396 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.PlatformController.CreatePlatform (Warehouse Management)'
2025-02-22 23:42:29.415 +07:00 [INF] Route matched with {action = "CreatePlatform", controller = "Platform"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePlatform(Warehouse_Management.Models.DTO.Platform.CreatePlatformDTO) on controller Warehouse_Management.Controllers.PlatformController (Warehouse Management).
2025-02-22 23:42:30.391 +07:00 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 23:42:30.393 +07:00 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 23:42:30.393 +07:00 [WRN] No store type was specified for the decimal property 'BasePrice' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-02-22 23:42:31.459 +07:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Platforms] ([ApiKey], [IsActive], [Name])
OUTPUT INSERTED.[PlatformId]
VALUES (@p0, @p1, @p2);
2025-02-22 23:42:31.500 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:42:31.521 +07:00 [INF] Executed action Warehouse_Management.Controllers.PlatformController.CreatePlatform (Warehouse Management) in 2100.9968ms
2025-02-22 23:42:31.523 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.PlatformController.CreatePlatform (Warehouse Management)'
2025-02-22 23:42:31.529 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Platform - 201 null application/json; charset=utf-8 3070.171ms
2025-02-22 23:43:29.566 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Order - application/json 245
2025-02-22 23:43:29.573 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:43:29 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 23:43:29.575 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:43:29 PM'.
2025-02-22 23:43:29.575 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.OrderController.CreateOrder (Warehouse Management)'
2025-02-22 23:43:29.579 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(Warehouse_Management.Models.DTO.Order.CreateOrderDTO) on controller Warehouse_Management.Controllers.OrderController (Warehouse Management).
2025-02-22 23:43:29.699 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [OrderDate], [OrderStatus], [PlatformId], [PlatformOrderId], [TotalAmount])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-02-22 23:43:29.709 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[OrderItemId]
VALUES (@p6, @p7, @p8, @p9);
2025-02-22 23:43:29.722 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:43:29.731 +07:00 [INF] Executed action Warehouse_Management.Controllers.OrderController.CreateOrder (Warehouse Management) in 150.848ms
2025-02-22 23:43:29.735 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.OrderController.CreateOrder (Warehouse Management)'
2025-02-22 23:43:29.736 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Order - 201 null application/json; charset=utf-8 170.0753ms
2025-02-22 23:47:16.299 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Order - application/json 245
2025-02-22 23:47:16.304 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:47:16 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 23:47:16.306 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:47:16 PM'.
2025-02-22 23:47:16.306 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.OrderController.CreateOrder (Warehouse Management)'
2025-02-22 23:47:16.307 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(Warehouse_Management.Models.DTO.Order.CreateOrderDTO) on controller Warehouse_Management.Controllers.OrderController (Warehouse Management).
2025-02-22 23:47:16.332 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [OrderDate], [OrderStatus], [PlatformId], [PlatformOrderId], [TotalAmount])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-02-22 23:47:16.353 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'Warehouse_Management.Data.WareHouseDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Platforms_PlatformId". The conflict occurred in database "WarehouseManagerment", table "dbo.Platforms", column 'PlatformId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e120dd5f-72ab-45e8-ae7b-ee644808cb75
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Platforms_PlatformId". The conflict occurred in database "WarehouseManagerment", table "dbo.Platforms", column 'PlatformId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e120dd5f-72ab-45e8-ae7b-ee644808cb75
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-22 23:47:16.415 +07:00 [ERR] Error occurred in OrderService
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Platforms_PlatformId". The conflict occurred in database "WarehouseManagerment", table "dbo.Platforms", column 'PlatformId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e120dd5f-72ab-45e8-ae7b-ee644808cb75
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Warehouse_Management.Repositories.Repository.OrderRepository.SaveChangesAsync() in D:\SWD_BE\src be\Warehouse Management\Repositories\Repository\OrderRepository.cs:line 41
   at Warehouse_Management.Services.Service.OrderService.CreateOrderAsync(CreateOrderDTO orderDto) in D:\SWD_BE\src be\Warehouse Management\Services\Service\OrderService.cs:line 36
2025-02-22 23:47:16.443 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:47:16.444 +07:00 [INF] Executed action Warehouse_Management.Controllers.OrderController.CreateOrder (Warehouse Management) in 133.6946ms
2025-02-22 23:47:16.449 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.OrderController.CreateOrder (Warehouse Management)'
2025-02-22 23:47:16.450 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Order - 500 null application/json; charset=utf-8 151.3296ms
2025-02-22 23:47:42.494 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Order - application/json 245
2025-02-22 23:47:42.499 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:47:42 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 23:47:42.501 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:47:42 PM'.
2025-02-22 23:47:42.501 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.OrderController.CreateOrder (Warehouse Management)'
2025-02-22 23:47:42.502 +07:00 [INF] Route matched with {action = "CreateOrder", controller = "Order"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(Warehouse_Management.Models.DTO.Order.CreateOrderDTO) on controller Warehouse_Management.Controllers.OrderController (Warehouse Management).
2025-02-22 23:47:42.511 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [OrderDate], [OrderStatus], [PlatformId], [PlatformOrderId], [TotalAmount])
OUTPUT INSERTED.[OrderId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-02-22 23:47:42.515 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderItems] ([OrderId], [ProductId], [Quantity], [UnitPrice])
OUTPUT INSERTED.[OrderItemId]
VALUES (@p6, @p7, @p8, @p9);
2025-02-22 23:47:42.519 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'Warehouse_Management.Data.WareHouseDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Products_ProductId". The conflict occurred in database "WarehouseManagerment", table "dbo.Products", column 'ProductId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e120dd5f-72ab-45e8-ae7b-ee644808cb75
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Products_ProductId". The conflict occurred in database "WarehouseManagerment", table "dbo.Products", column 'ProductId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e120dd5f-72ab-45e8-ae7b-ee644808cb75
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-22 23:47:42.562 +07:00 [ERR] Error occurred in OrderService
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_OrderItems_Products_ProductId". The conflict occurred in database "WarehouseManagerment", table "dbo.Products", column 'ProductId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e120dd5f-72ab-45e8-ae7b-ee644808cb75
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Warehouse_Management.Repositories.Repository.OrderRepository.SaveChangesAsync() in D:\SWD_BE\src be\Warehouse Management\Repositories\Repository\OrderRepository.cs:line 41
   at Warehouse_Management.Services.Service.OrderService.CreateOrderAsync(CreateOrderDTO orderDto) in D:\SWD_BE\src be\Warehouse Management\Services\Service\OrderService.cs:line 36
2025-02-22 23:47:42.567 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:47:42.567 +07:00 [INF] Executed action Warehouse_Management.Controllers.OrderController.CreateOrder (Warehouse Management) in 63.8634ms
2025-02-22 23:47:42.568 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.OrderController.CreateOrder (Warehouse Management)'
2025-02-22 23:47:42.569 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Order - 500 null application/json; charset=utf-8 74.7393ms
2025-02-22 23:53:17.256 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Product - application/json 116
2025-02-22 23:53:17.261 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:53:17 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 23:53:17.262 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:53:17 PM'.
2025-02-22 23:53:17.263 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 23:53:17.267 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(Warehouse_Management.Models.DTO.Product.CreateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 23:53:17.275 +07:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-22 23:53:17.282 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management) in 14.7655ms
2025-02-22 23:53:17.283 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 23:53:17.283 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Product - 401 null application/json; charset=utf-8 27.9835ms
2025-02-22 23:53:27.686 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Product - application/json 116
2025-02-22 23:53:27.689 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:53:27 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 23:53:27.696 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:53:27 PM'.
2025-02-22 23:53:27.696 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 23:53:27.697 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(Warehouse_Management.Models.DTO.Product.CreateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 23:53:27.699 +07:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-22 23:53:27.700 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management) in 2.4941ms
2025-02-22 23:53:27.701 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 23:53:27.703 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Product - 401 null application/json; charset=utf-8 16.3409ms
2025-02-22 23:53:35.787 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Product - application/json 112
2025-02-22 23:53:35.789 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:53:35 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 23:53:35.791 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:53:35 PM'.
2025-02-22 23:53:35.792 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 23:53:35.792 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(Warehouse_Management.Models.DTO.Product.CreateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 23:53:35.795 +07:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-22 23:53:35.796 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management) in 2.1351ms
2025-02-22 23:53:35.797 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 23:53:35.797 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Product - 401 null application/json; charset=utf-8 10.3242ms
2025-02-22 23:53:40.530 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Product - application/json 108
2025-02-22 23:53:40.532 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:53:40 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-02-22 23:53:40.534 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '2/22/2025 2:54:23 PM', Current time (UTC): '2/22/2025 4:53:40 PM'.
2025-02-22 23:53:40.534 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 23:53:40.535 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(Warehouse_Management.Models.DTO.Product.CreateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 23:53:40.537 +07:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-22 23:53:40.537 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management) in 1.2057ms
2025-02-22 23:53:40.538 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 23:53:40.538 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Product - 401 null application/json; charset=utf-8 8.6443ms
2025-02-22 23:54:02.048 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Auth/login - application/json 60
2025-02-22 23:54:02.053 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.AuthController.Login (Warehouse Management)'
2025-02-22 23:54:02.057 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Warehouse_Management.Models.DTO.LoginRequestDTO) on controller Warehouse_Management.Controllers.AuthController (Warehouse Management).
2025-02-22 23:54:02.070 +07:00 [INF] Login attempt for username: ha@example.com
2025-02-22 23:54:02.279 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[Status]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-02-22 23:54:02.486 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-02-22 23:54:02.497 +07:00 [INF] Login successful for user: ha@example.com
2025-02-22 23:54:02.498 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:54:02.500 +07:00 [INF] Executed action Warehouse_Management.Controllers.AuthController.Login (Warehouse Management) in 441.7922ms
2025-02-22 23:54:02.501 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.AuthController.Login (Warehouse Management)'
2025-02-22 23:54:02.502 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Auth/login - 200 null application/json; charset=utf-8 453.5992ms
2025-02-22 23:54:33.899 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7190/api/Product - application/json 116
2025-02-22 23:54:33.913 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 23:54:33.913 +07:00 [INF] Route matched with {action = "CreateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(Warehouse_Management.Models.DTO.Product.CreateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 23:54:33.949 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Barcode], [BasePrice], [CreatedAt], [Description], [ProductName], [SKU], [UpdatedAt], [UserId])
OUTPUT INSERTED.[ProductId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-02-22 23:54:33.955 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:54:33.963 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management) in 48.7668ms
2025-02-22 23:54:33.964 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.CreateProduct (Warehouse Management)'
2025-02-22 23:54:33.964 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7190/api/Product - 201 null application/json; charset=utf-8 65.6938ms
2025-02-22 23:54:48.418 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Product - null null
2025-02-22 23:54:48.421 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.GetAllProducts (Warehouse Management)'
2025-02-22 23:54:48.424 +07:00 [INF] Route matched with {action = "GetAllProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllProducts() on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 23:54:48.434 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
2025-02-22 23:54:48.442 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:54:48.445 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.GetAllProducts (Warehouse Management) in 19.9827ms
2025-02-22 23:54:48.445 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.GetAllProducts (Warehouse Management)'
2025-02-22 23:54:48.446 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Product - 200 null application/json; charset=utf-8 28.0639ms
2025-02-22 23:55:16.247 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Product/ca - null null
2025-02-22 23:55:16.252 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.SearchProducts (Warehouse Management)'
2025-02-22 23:55:16.257 +07:00 [INF] Route matched with {action = "SearchProducts", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchProducts(System.String, System.String, System.String) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 23:55:16.264 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
2025-02-22 23:55:16.270 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:55:16.271 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.SearchProducts (Warehouse Management) in 12.9292ms
2025-02-22 23:55:16.271 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.SearchProducts (Warehouse Management)'
2025-02-22 23:55:16.272 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Product/ca - 200 null application/json; charset=utf-8 25.2931ms
2025-02-22 23:55:42.501 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Product/by-id/1 - null null
2025-02-22 23:55:42.506 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.GetProductById (Warehouse Management)'
2025-02-22 23:55:42.509 +07:00 [INF] Route matched with {action = "GetProductById", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProductById(Int32) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 23:55:42.519 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 23:55:42.521 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:55:42.521 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.GetProductById (Warehouse Management) in 11.8882ms
2025-02-22 23:55:42.522 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.GetProductById (Warehouse Management)'
2025-02-22 23:55:42.526 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Product/by-id/1 - 200 null application/json; charset=utf-8 25.2815ms
2025-02-22 23:55:45.356 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7190/api/Product/by-id/2 - null null
2025-02-22 23:55:45.357 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.GetProductById (Warehouse Management)'
2025-02-22 23:55:45.358 +07:00 [INF] Route matched with {action = "GetProductById", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProductById(Int32) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 23:55:45.363 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 23:55:45.365 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:55:45.366 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.GetProductById (Warehouse Management) in 6.6765ms
2025-02-22 23:55:45.367 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.GetProductById (Warehouse Management)'
2025-02-22 23:55:45.367 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7190/api/Product/by-id/2 - 404 null application/json; charset=utf-8 11.5145ms
2025-02-22 23:55:59.301 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7190/api/Product/1 - application/json 115
2025-02-22 23:55:59.303 +07:00 [INF] Executing endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 23:55:59.306 +07:00 [INF] Route matched with {action = "UpdateProduct", controller = "Product"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProduct(Int32, Warehouse_Management.Models.DTO.Product.UpdateProductDTO) on controller Warehouse_Management.Controllers.ProductController (Warehouse Management).
2025-02-22 23:55:59.314 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Barcode], [p].[BasePrice], [p].[CreatedAt], [p].[Description], [p].[ProductName], [p].[SKU], [p].[UpdatedAt], [p].[UserId]
FROM [Products] AS [p]
WHERE [p].[ProductId] = @__id_0
2025-02-22 23:55:59.327 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [Barcode] = @p0, [BasePrice] = @p1, [CreatedAt] = @p2, [Description] = @p3, [ProductName] = @p4, [SKU] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [ProductId] = @p8;
2025-02-22 23:55:59.329 +07:00 [INF] Executing ObjectResult, writing value of type 'Warehouse_Management.Helpers.ApiResponse'.
2025-02-22 23:55:59.330 +07:00 [INF] Executed action Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management) in 21.6381ms
2025-02-22 23:55:59.331 +07:00 [INF] Executed endpoint 'Warehouse_Management.Controllers.ProductController.UpdateProduct (Warehouse Management)'
2025-02-22 23:55:59.331 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7190/api/Product/1 - 200 null application/json; charset=utf-8 29.7344ms
